---
title: "-Ware"
date: 2022-10-05. 09:42
---

.NET 은 WCF Windows Communication Foundation, .NET Remoting, XML Web Services 처럼 사용하기 쉬우면서도 강력한 네트워킹 프레임워크 제공  
이 기술들은 다른 컴퓨터에서 실행되고 있는 상대 프로세스가 마치 한 컴퓨터, 아니 한 프로세스 안에 있는 객체인 것처럼 다루게 해줍니다.  
따라서 .NET 플랫폼을 이용하는 프로그래머들은 애플리케이션에 네트워크 기능을 넣기 위해 골치를 썩힐 일은 겅의 없다고 할 수 잇음  

목수들은 강력한 전동 공구와 수동 공구를 함께 공구 상자 넣어 다님. 전동 공구로 거의 대부분의 일을 처리하긴 하지만, 세밀한 작업을 할 때에는 목수가 정교하게 힘 조절을 하며 사용할 수 잇는 수동 공구가 필요하기 때문. 같은 이유로 플머들도 프레임워크 내부에서 일어나는 일들을 알아둘 필요가 있음. 애플리케이션의 정교한 성능 조정이나 디버깅을 하려면 프레임워크 없이도 일을 해낼 수 있는 기초가 반드시 필요

.NET Remoting, XML Web Services, WCF 등도 깊이 다루려면 각각 책 한 두권 이상의 분량에 달하는 설명이 필요하지만, 네트워크 프로그래밍도 이에 못지않게 많은 지면을 요구. 배보다 배꼽이 더 커지는 셈이죠. 그렇다고 설명하지 않고 넘어갈 수도 없는 일인데 말입니다. 그래서 저는 간단한 파일 전송 프로그램을 만들 수 잇을 정도의 내용을 설명하는 것으로 이번 장의 수준을 정햇씁니다.

---

TCP Transmission Control Protocol 전송 제어 프로토콜  
IP Internet Protocol 인터넷 프로토콜  

Protocol System : Network 통신을 지원하는 Protocol의 집합체  

```Text
Data Communication의 구성 요소

- Message
- 통신의 대상이 되는 Info (Data)
- Char Num Picture Video Sound 또는 이들의 조합

- Sender 송신자
- Data Message를 보내는 Device
- Computer, Cell Phone, Video Camera

- Recevier
- Message를 받는 Device
- Computer, Cell Phone, TV

- Medium 전송매체
- Sender에서 Rececier까지 이동하는 Physical 경로
- 꼬임쌍선 Twisted Pair Wire, 동축 케이블 Coaxial Cable, 광 케이블 Fiber-Optic Cable, 레이저 도는 무전파 Radio Wave

- Protocol 프로토콜
- Data Communication을 통제하는 규칙들의 집합 (상호 합의)

```

## 네트워크와 프로토콜

Network 네트워크 :  
공통된 전송 매체를 통해 서로 통신하는 컴퓨터 또는 컴퓨터 유사 기기의 집합체  
전송 매체는 보통 전화선처럼 컴퓨터 간에 전자 펄스가 이동하는 절연 금속선  
그런데 무선 네트워크처럼 선이 없는 경우도 있음  

컴퓨터가 어떻게 연결되었는지에 상관없이 통신 과정은 '전송 매체를 통해 컴퓨터에서 다른 컴퓨터로 데이터를 전달하는 것' 을 의미  

컴퓨터 A <= 전송 매체 => 컴퓨터 B

컴퓨터 A는 컴퓨터 B로 메시지 혹은 요청을 보낼 수 있어야 함  
컴퓨터 B는 컴퓨터 A의 메시지를 이해하고 응답 할 수 있어야 함  

컴퓨터는 특정 임무를 수행하며 통신 과정을 관리하는 하나 이상의 APP을 통해 세상과 소통  
현대 시스템에서 이러한 Network 통신이 너무나도 간단하게 이루어져 사용자는 거의 알아차리지 못함  
예를 들어 사용자가 Web 서핑을 할 때 Web Browser는 지정된 URL을 통해 Web Server와 통신  
또한, User가 Window 탐색기 혹은 maxOS 파인더에서 인접 컴퓨터 목록을 볼 때는 로컬 네트워크의 컴퓨터는 통신해 자신의 존재를 알림  
어떤 경우라도 네트워크에 컴퓨터가 연결되어 있다면, 컴퓨터 APP은 다른 Network의 컴퓨터 APP과 통신이 가능  

Network Protocal 네트워크 프로토콜 :  
네트워크 통신의 복잡한 과정을 규정하는 공통 규칙 시스템  
프로토콜은 어떤 컴퓨터 APP에서 OS의 Network 요소를 통해 Network HW로, 그리고 전송 매체, 대상 컴퓨터의 Network HW와 OS를 지나 수신하는 APP까지의 데이터 전송 과정을 안내

APP  
네트워크 프로토콜 스위트 (응용 계층, 전송 계층, 인터넷 계층, 네트워크 접근 계층)  
Network HW  
전송 매체  
Network HW
Network Protocol Suite
APP

TCP/IP Protocol은 Network Process를 Define하고, 특히 수신하는 컴퓨터가 올바르게 메시지를 해석할 수 있도록 Data가 어떻게 표시되어야 하는지 그리고 어떤 Info가 담겨야 하는지는 Define합니다.  
TCP/IP 및 관련 Protocol은 TCP/IP Network에서 Data가 어떻게 처리, 전송, 수신되는 지를 Define하는 전체 System을 구성합니다.  
TCP/IP 같은 관련 Protocol의 System/ 집합 (Set)을 Protocol Suite 프로토콜 스위트라고 합니다.  

TCP/IP 전송을 Format하고 처리하는 실제 작업은 TCP/IP 구현 (Implementation) 으로 알려진 SW 구성 요소가 수행  
예를 들어 MS Window의 TCP/IP SW 구성 요소를 사용하면 Windwo가 TCP/IP 형식의 Data를 처리하여 TCP/IP Network에 참여할 수 있습니다.  

주의  
TCP/IP 표준 : TCP/IP Network의 통신을 Define하는 Rule System  
TCP/IP 구현 : TCP/IP Network에 컴퓨터가 참여할 수 있도록 하는 기능을 수행하는 SW  

TCP/IP 표준의 목적은 모든 TCP/IP 구현의 버전 또는 벤터 (Vendor)와 관계없이 호환성을 보장

NOTE  
TCP/IP를 주제로 한 대중적인 토론에서는 TCP/IP 표준과 구현을 종종 구별하지 않고 이야기하는데, 이는 오해를 낳기도 함  
예를 들어 필자는 보통 다른 계층에 서비스를 제공하는 TCP/IP 모델 계층에 대해 이야기하는데, 사실 TCP/IP 모델은 서비스를 제공하지 않습니다. 오히려 TCP/IP 모델은 받아야 하는 서비스를 정의합니다. 이런 서비스는 TCP/IP의 벤더 소프트웨어 구현에서 제공합니다  

## TCP/IP의 개발

TCP/IP 설계는 지금의 인터넷이 되기 위한 프로토콜 시스템의 역사적 결과입니다. 다른 첨단 기술의 개발처럼 인터넷은 본래 미국 국방부에서 수행한 연구를 통해 성장했습니다. 1960년대 후반, 국방부는 보유한 컴퓨터가 그 수도 많고 매우 다양한다는 사실을 인식하기 시작했습니다. 어떤 컴퓨터에는 네트워크가 없는데 다른 컴퓨터는 호환되지 않는 독점 프로토콜을 사용한 소규모 폐쇄형 네트워크로 연결되어 있었습니다. 여기서 독점 (Proprietary) 이란 민간 기업에 의해 통제되는 폐쇠형 네트워크를 의미합니다. 이런 민간 기업은 프로토콜 정보가 공개되어 사용자가 프로토콜을 통해 다른(경쟁 기업) 네트워크에 접속하는 것을 원하지 않은 것입니다.  

국방부 관계자는 이렇게 서로 다른 컴퓨터가 정보를 교환할 수 있는지 궁금해하기 시작했습니다. 그렇게 해서 국방구 고급 연구 프로젝트 기관 ARPA의 이름을 딴 ARPAnet이 탄생합니다.  

네트워크가 점점 모양새를 잡아가면서 로버트 칸 (Robert E. Khan)과 빈튼 서프(Vinton Cerf)를 주축으로 한 컴퓨터 과학자들은 넓은 범위의 하드웨어를 지원하고, 방대하고 글로벌한 규모로 데이터를 전달할 수 있는 탄력적이고 중복적이며 분산된 시스템을 제공하는 다용도 프로토콜 시스템을 만들기 시작합니다. 이러한 연구의 결과가 바로 TCP/IP 스위트의 시작입니다. 국립 과학 재단에서 연구 시설을 연결하는 네트워크를 구축할 때 ARPAnet 프로토콜 시스템을 채택하면서 우리가 현재 알고 있는 인터넷을 만들게 됩니다. 런던 대학과 다른 유럽 연구 기관도 TCP/IP의 초기 개발에 참여해 1975년 즈음에는 대서양 횡단 통신 테스트가 처음으로 시작되었습니다. 점점 더 많은 대학과 연구 기관이 연결되기 시작하면서 인터넷이라는 현상이 세계 곳곳에 퍼지기 시작합니다.

이 책의 뒷부분에서 알 수 있듯이, ARPAnet의 분산 시스템은 TCP/IP 프로토콜 시스템 설계에 오늘날까지도 여전히 이용되고 있으며 TCP/IP과 인터넷의 성공에 큰 역할을 차지하고 있습니다. 이러한 분산 환경을 제공하는 TCP/IP의 두 가지 주요 기능은 다음과 같습니다.

- 엔드 노드 검증 :  
- 메시지를 전달하는 체인의 양쪽 끝에 있어서 엔드 노드 End Node 라고 불리며, 통신을 수신하고 검증하는 책임은 실제 통신하는 두 컴퓨터에 책임이 있습니다. 모든 컴퓨터는 기본적으로 똑같이 작동하며, 의사소통을 관리하는 중앙 시스템은 없습니다.

- 동적 라우팅 :  
- 노드는 여러 경로를 통해 연결되며, 라우터는 현재 상태를 기반으로 경로를 선택합니다. 뒤에서 라우팅 (Routing)과 라우터 Router에 대해 더 자세히 알아보겠습니다.

### 개인용 컴퓨터의 혁명

인터넷이 발전하면서 대부분의 컴퓨터는 다중 사용자 시스템이 가능해졌습니다. 사무실 또는 캠퍼스에서 터미널 Terminal 이라고 하는 텍스트 스크린 인터페이스 Text-Screen Interface 를 통해 여러 사용자를 컴퓨터 하나에 연결할 수 있었습니다. 사용자들은 독립적으로 작업이 가능했지만, 많은 사람이 하나의 인터넷 연결만을 통해 동일한 컴퓨터에 접근해야 했습니다. 하지만 1980년대 그리고 1990년대에 들어서면서 개인용 컴퓨터 PC가 보급되자 이러한 문제를 해결해야 했습니다.

PC 보급 초기에는 User 대부분이 Network에 관심이 없었습니다. 하지만 Internet이 점차 기존에 가진 기능을 넘어 발전하면서 User들은 Network에 연결할 방법을 찾기 시작했는데, 바로 전화선으로 네트워크를 연결하는 '모뎀' 이라는 기기로 접속하는 것이었습니다.

하지만 User들은 사무실의 다른 인접 Computer에도 Connect해 File을 Share하고 주변 Device에도 Access하고자 했습니다. 이러한 요구를 반영해서 근거리 통신망 LAN Local Area Network 이라는 또 다른 Network 개념이 생겼습니다.

초기 LAN Protocol은 인터넷 접속도 되지 않았고 독점 Protocol System으로 설계되었습니다. 대부분이 어떠한 Routing도 되지 않았습니다. 단일 그룹의 Computer는 이러한 독점 Protocol 중 하나를 통해서 메시지를 주고받았고, 사용자들은 Internet 없이 작업하거나 별도로 전화선을 이용해 Connect했습니다. Internet Service 제공자가 점차 늘어나고 인터넷 접근이 용이해지면서 Company들은 Fast하고 영구적이면서 지속적인 Internet Connect를 요구하기 시작햇습니다. 그러면서 LAN User들을 TCP/IP 기반의 Internet에 Connect하기 위한 다양한 Solution이 생기기 시작했습니다. Solution 중 하나로 특수 Gateway가 이러한 Local Network가 Internet에 도달하는 데 필요한 Protocol 변환을 하였습니다. 하지만 월드 와이드 웹 WWW World Wide Web 이 성장하고 최정 User의 Internet Connect에 대한 요구가 생기면서 점차 TCP/IP가 필수가 되어 AppleTalk, NetBEUI, Novell's IPX/SPX와 같은 독점 LAN Protocal을 사용할 이유가 거의 없어졌습니다.

애플이나 MS 같은 OS Vendor가 TCP/IP를 Internet을 포함한 Local Network 의 기본 Protocol을 만들기 시작했습니다. TCP/IP는 Unix를 중심으로 성장해 모든 Unix/Linux 기반 OS가 사용하고 있으며, 이제는 작은 Office부터 대형 Data Center까지 사용하는 전 세계의 Network Protocol이 되었습니다

`3장 네트워크 접근 계층` 에서 알 수 있듯이, LAN을 수용해야 할 필요가 생기면서 TCP/IP 기반이 되는 HW 인식 Protocol의 구현에 상당한 혁신을 가져왔습니다.

## TCP/IP의 기능

TCP/IP는 이 책에서 배울 중요한 기능이 많이 있습니다. 특히 TCP/IP Protocol Suite가 다음 문제를 해결하는 방식에 주의를 기울이세요,

- 논리 주소 지정  
- 라우팅  
- 이름 확인  
- 오류 제어 및 흐름 제어  
- 애플리케이션 지원  

이러한 문제가 바로 TCP/IP의 핵심입니다. 계속해서 이러한 기능들을 살펴보고, 더 많은 기능은 책 뒷부분에서 다루겠습니다.

### 논리 주소 지정

Network Adaptor는 고유한 물리 Address를 가집니다. Ethernet의 경우, 종종 미디어/매체 접근 제어 주소 MAC Media Access Control Address라고도 하는 Adaptor의 Physical Address 는 제조 공장에서 할당되는데, 현재 많은 Device가 Physical Address를 변경할 수 있습니다. LAN에서 HW를 인식하는 Protocol은 Adaptor의 Physical Address 를 사용해서 Data를 물리적 Network를 통해 Transfer합니다. Network는 그 종류가 다양하며, Data를 Transfer하는 방법도 각각 다릅니다. 기본 Ethernet Network를 예로 들면, Computer는 전송 매체에 직접 Message를 보내면 각 Computer의 Network Adaptor는 Local Network의 모든 전송을 청취해서 Message가 자신의 Physical Addess로 할당된 것인지 결정합니다.

Note = 흠, 쉽지만은 않습니다  
9장에서 배울 오늘날의 Ethernet Network는 Computer가 전송 매체로 직접 Message를 보내지 않고 조금 더 복잡한 과정을 거칩니다. Signal을 관리하기 위해 Ethernet Network에 종종 Switch와 같은 HW Device가 포함됩니다.

Transmission Medium

물론 대규모 Network에서 모든 Network Adaptor가 모든 Message를 청취하고 있진 않습니다 (Computer가 Internet을 통해 Transfer되는 모든 Data를 청취하고 있다고 상상해보세요). Computer와 함께 Transmission Medium이 늘어나면서 Physical Address 지정 체계가 효율적으로 작동하지 않게 됩니다. 이때 Network 관리자는 Network Traffic을 줄이기 위해 Router 같은 장치로 Network를 세분화합니다. 관리자는 Routing된 Network에서 Subnet이라고 하는 더 작은 SubNetwork로 세분화해 Message가 대상으로 효율적으로 이동할 수 있게 계층적 설계를 해야합니다. 바로 TCP/IP가 논리 주소 지정을 통해 이러한 Subnet 기능을 제공합니다. Logical Address는 Network SW를 통해 구성된 Address이며, TCP/IP에서 Computer의 Logical Address를 IP Address라고 합니다. 4장과 5장에서 배울 내용으로, IP 주소는 다음을 포함합니다.

- Network를 식별하는 Network ID Number
- Network의 Subnet을 식별하는 Subnet ID Number

- (Subnet의 Computer를 식별하는 Host ID Number)

또한, IP Address 지정 시스템은 Network 관리자가 Network에 적절한 번호 체계를 적용해서 주소가 Network의 내부 조직을 반영하도록 합니다.

Note = 인터넷 준비 주소
만약 Network가 Internet과 분리되어있다면 (Netwrok가 IP Address를 지정하는 기본 규칙을 지키는 선에서) 원하는 IP Address를 자유롭게 설정할 수 있습니다. But Network가 Internet의 일부라면 1988년에 설립된 국제 인터넷 주소 관리 기구 ICANN Internet Corporation for Assigned Names and Numbers 에서 Network에 Network ID를 할당해서 해당 Network ID가 IP Address의 앞부분을 구성합니다. (4장과 5장을 참고하세요.) 네트워크 주소 변환 NAT Network Address Translation 이라는 System이 개발되었는데, 이는 Local Network에서 Internet에서 Routing 할 수 없는 사설 Private IP 범위를 사용할 수 있게 합니다, NAT 장치는 Internet Communication을 위해 Local Address를 공인 IP 주소 (공식 인터넷 준비 주소 Internet-Ready Address)로 전환합니다. NAT는 12장에서 더 자세히 알아보겠습니다.

TCP/IP에서는 4장에서 다루는 주소 확인 프로토컬 ARP Address Resolution Protocol과 역 ARP Reverse ARP 를 사용해서 특정 Physical Address와 Logical Address를 주고받습니다.

라우팅
라우터는 논리 주소 지정 정보를 읽고 네트워크를 통해 목적지에 데이터를 직접
전달하는 특별한 장치

Routing  
Router는 Logical Address 지정 정보를 읽고 Network를 통해 목적지에 Data를 직접 전달하는 특별한 Device  
쉽게 말해 Router는 대규모 Network에서 Local Subnet을 분리합니다  

로컬 서브넷의 다른 컴퓨터 또는 장치에 할당된 데이터는 라우터를 통과하지 않아서 대규모 네트워크의 전송 라인을 방해하지 않습니다. 만약 데이터가 서브넷 외부에서 컴퓨터에 할당된다면 라우터는 그에 따라 데이터를 전달합니다. 이 장에서도 언급했듯이, 인터넷과 같은 대규모 네트워크는 많은 라우터가 있으며 출발지에서 대상지까지 여러 경로를 제공합니다(그림 1-4).

TCP/IP는 라우터가 네트워크를 통해 어떻게 경로를 찾아야 하는지 정의하는 프로토콜을 포함합니다. TCP/IP 라우팅과 라우팅 프로토콜은 8장에서 더 자세히 다루겠습니다.

Note ≡ 그 외의 필터링 장치

9장에서 배우겠지만, 브릿지(bridge)와 스위치 같은 네트워크 장치와 지능형 허브(hub)도 트래픽을 필터링하고 네트워크 트래픽도 줄입니다. 이런 장치들은 논리 주소가 아닌 물리 주소를 사용하기 때문에 그림 1-4와 같이 복잡한 라우팅 기능은 수행할 수 없습니다

1.3.3 이름 확인

숫자로 된 IP 주소가 확실히 네트워크 어댑터의 사전 할당된 물리 주소보다 사용자에게 편하지만, 그래도 IP 주소는 여전히 사용자의 편리함보다는 컴퓨터의 편리함을 위해 설계되어 있습니다. 사람들은 컴퓨터의 주소가 111.121.131인지 111.121.131.156인지 헷갈릴 수 있습니다. 그래서 TCP/IP는 도메인 이름 또는 도메인 이름 시스템(DNS, Domain Name System)이라고 하는 사용자가 이해할 수 있는 영어와 숫자로 조합한 이름을 제공합니다. 도메인 이름을 IP 주소로 매핑하는 것을 이름 확인(name resolution)이라고 합니다. 이름 서버(name server)라고 하는 특별한 컴퓨터는 이러한 도메인 이름을 IP 주소로 변환하는 방법을 보여주는 표를 저장합니다.

일반적으로 이메일 또는 WWW와 관련된 컴퓨터 주소는 DNS 이름으로 표현됩니다(예를 들어 www.microsoft.com, falcon.ukans.edu, idir.net 등). TCP/IP의 이름 서비스(name service) 시스템은 네트워크에서 DNS 등록 컴퓨터의 도메인 이름/IP 주소를 매핑하는 이름 서버의 계층 구조를 제공합니다. 이는 사용자가 매번 실제 IP 주소를 알아낼 필요가 없다는 뜻입니다.

DNS는 인터넷을 위한 이름 확인 시스템이면서 가장 흔한 이름 확인 방식입니다. 물론 영문과 숫자로 조합된 이름을 IP 주소로 변환하는 다른 기술도 있습니다. 이러한 대체 시스템은 최근 몇 년 동안 사용되지 않고 있지만, NetBIOS 이름을 IP 주소로 변환하는 WINS(Windows Internet Name Services)라는 이름 확인 서비스는 여전히 전 세계에서 사용하고 있습니다.

TCP/IP 이름 확인은 10장에서 더 자세히 알아보겠습니다.

1.3.4 오류 제어 및 흐름 제어

TCP/IP 프로토콜 스위트는 네트워크에서 데이터의 안정적인 전송을 보장하는 기능을 제공합니다. (도착한 데이터가 정확한지를 보장하기 위해) 전송에 오류가 있는지 확인하고 네트워크 메시지를 성공적으로 수신했는지 확인합니다. TCP/IP의 전송 계층(6장을 참고하세요)은 TCP 프로토콜을 통해 오류 제어, 흐름 제어, 승인 기능을 정의합니다. TCP/IP 네트워크 접근 계층(3장을 참고하세요)에 있는 낮은 수준의 프로토콜 또한 전체 오류 제어 시스템에서 중요한 역할을 합니다.

1.3.5 애플리케이션 지원

몇몇 네트워크 애플리케이션은 동일한 컴퓨터에서 실행될 수 있습니다. 프로토콜 소프트웨어는 반드시 각 애플리케이션에 속하는 패킷을 결정하는 수단을 제공해야 합니다. TCP/IP의 경우 네트워크에서 애플리케이션으로의 인터페이스는 포트(port)라는 논리적 채널 시스템을 통해 수행됩니다. 각 포트는 식별하는 데 사용되는 번호가 있습니다. 이러한 포트는 애플리케이션에서 프로토콜 소프트웨어로 데이터가 이동하는 컴퓨터의 논리적 파이프라인이라고 보면 됩니다(그림 1-5 참조).

APP1 APP2 APP3  
TCP UDP
인터넷 계층
네트워크 접근 계층
|
네트워크

CP/IP 전송 계층의 TCP와 UDP 포트는 6장에서, 애플리케이션 지원과 TCP/IP 응용 계층은 7장에서 살펴보겠습니다.

TCP/IP 스위트에는 다양한 네트워크 작업을 지원하도록 설계된 수많은 기성 애플리케이션도 포함되어 있습니다. 일반적인 TCP/IP 유틸리티는 표 1-1에 나와 있습니다. TCP/IP 유틸리티는 14장에서 알아보겠습니다.

▼ 표 1-1 일반적인 TCP/IP 유틸리티

|유틸리티|목적|
|ftp|파일 전송|
|Lpr|출력|
|Ping|구성/문제 해결|
|NSlookup|구성/이름 확인|
|Traceroute|구성/문제 해결|

Note ≡ 새로운 시대

무선 네트워크, 가상 사설망, 사물 인터넷, NAT 같은 기술은 TCP/IP 설계자들이 상상도 못했을 새로운 복잡성을 더하고 있으며, 차세대 IPv6 프로토콜은 IP 주소 지정 방식을 바꾸고 있습니다. 이후 장에서 이러한 기술에 대해 더 자세히 알아보겠습니다.

1.4 표준 조직 및 RFC

여러 조직이 TCP/IP와 인터넷 개발에 중요한 역할을 했습니다. TCP/IP가 군사적 목적으로 시작했음은 약어의 양과 그 의미의 모호함으로 미루어 짐작할 수 있습니다. 그래도 TCP/IP의 과거와 현재의 몇몇 조직은 다음과 같이 언급할 필요가 있습니다.

• IAB(Internet Architecture Board): 인터넷 아키텍처 위원회. 인터넷 정책을 수립하고 TCP/IP 표준의 추가 개발을 확인 및 관리하는 위원회

• IETF(Internet Engineering Task Force): 인터넷 엔지니어링 태스크 포스. 공학 문제를 연구하고 규정하는 조직으로 애플리케이션, 라우팅, 네트워크 관리 등 TCP/IP 및 인터넷의 특정 측면을 연구하는 작업 그룹으로 나뉨

• IRTF(Internet Research Task Force): 인터넷 테스크 포스. 장기적 연구를 후원하는 IAB의 하위 조직

• ICANN(Internet Corporation for Assigned Names and Numbers): 국제 인터넷 주소 관리 기구(www.icann.org). 1998년에 설립되어 인터넷 도메인 이름, IP 주소 및 포트 번호 등 글로벌 고유 프로토콜 매개변수 할당을 조정하는 조직

최근까지도 인터넷의 뿌리가 미국 정부 프로젝트였음을 인터넷 할당 번호 관리 기관(IANA, Internet Assigned Numbers Authority)을 유지하는 미국의 역할로 알 수 있습니다. 미국 국가 정보 통신 및 정보 관리국(NTIA, National Telecommunications and Information Administration)은 ICANN과 협약을 통해 1999년부터 IP 주소, 프로토콜 매개변수, DNS 루트 존을 관리하고 있으며, NTIA는 전체적인 감독 역할만을 하고 있습니다. NTIA는 현재 IANA 기능의 모든 통제권을 완전히 넘기는 전환 계획을 수립하기 위해 ICANN과 협상 중입니다. 이는 인터넷이 마침내 진정으로 국제적이고 독립적이 된다는 것을 의미합니다.

TCP/IP는 어느 회사나 개인이 소유할 수 없는 개방형 표준 시스템이기 때문에 인터넷 커뮤니티는 추가 및 변경 사항을 제안하고 토론과 발표를 하기 위해 포괄적이고 독립적인 벤더 중립적 프로세스가 필요합니다. 대부분의 TCP/IP 공식 문서는 TCP/IP 및 인터넷 관련 정보를 제공하는 일련의 공식 기술 문서 RFC(Request for Comment)를 통해 사용할 수 있습니다. RFC 라이브러리는 작업 그룹의 인터넷 표준 및 보고서를 포함하며, IETF 공식 사양은 RFC에 게재됩니다. 많은 RFC는 TCP/IP 또는 인터넷의 일부 측면을 명확히 하려고 고안되었습니다. TCP/IP 스위트 대부분의 프로토콜이 하나 이상의 RFC로 정의되어 있어서 이 책에서 RFC에 대한 많은 참조를 찾을 수 있을 것입니다. 비록 대부분의 RFC는 산업 작업 그룹과 연구 기관이 만들었지만, 누구나 RFC에 리뷰를 제출할 수 있습니다. IETF에 제안 RFC를 보내거나 rfc-editor@rfc-editor.org 이메일로 직접 제출할 수도 있습니다.
-2 6000개 이상의 인터넷 RFC 중 대표적 예

|번호|제목|
|791|인터넷 프로토콜(IP, Internet Protocol)|
|792|인터넷 제어 메시지 프로토콜(ICMP, Internet Control Message Protocol)|
|793|전송 제어 프로토콜(TCP, Transmission Control Protocol)|
|959|파일 전송 프로토콜(FTP, File Transfer Protocol)|
|1180|TCP/IP 튜토리얼|
|1188|FDD 네트워크를 통한 데이터그램 전송을 위한 표준|
|2097|PPP NetBIOS 프레임 제어 프로토콜|
|4831|네트워크 기반의 현지화된 이동성 관리 목표|

1.6 Q&A

Q. 프로토콜 표준과 프로토콜 구현의 차이점은 무엇입니까?

A. 프로토콜 표준은 규칙 시스템입니다. 프로토콜 구현은 컴퓨터에 네트워크 기능을 제공하기 위해 이러한 규칙들을 적용한 소프트웨어 구성 요소입니다.

Q. ARPAnet의 엔드 노드 검증이 중요한 기능인 이유는 무엇입니까?

A. 네트워크는 설계상 중앙에서 제어가 되지 않으므로 송수신 컴퓨터는 자신의 통신 검증을 담당해야 합니다.

Q. 대규모 네트워크는 왜 이름 확인을 사용합니까?

A. IP 주소는 기억하기 어렵고 틀리기 쉽습니다. DNS 스타일의 도메인 이름은 단어나 이름을 IP 주소와 연결할 수 있어서 기억하기 쉽습니다.

1.7 워크숍

워크숍은 일련의 퀴즈와 연습 문제로 이루어져 있습니다. 퀴즈는 배운 내용을 잘 이해했는지 테스트하기 위한 것입니다. 연습 문제는 이 장에서 배운 개념을 적용해 보는 것이니 시간을 충분히 가지고 풀어 보세요. 해답은 부록 A를 참고하세요.

1.7.1 퀴즈

1. 네트워크 프로토콜은 무엇입니까?
2. 분산 방식으로 작동하게 하는 TCP/IP의 두 가지 기능은 무엇입니까?
3. 도메인 이름을 IP 주소에 매핑을 담당하는 시스템은 무엇입니까?
4. RFC는 무엇입니까?
5. 포트는 무엇입니까?

1.7.2 연습 문제

1. www.rfc-editor.org에 방문해서 RFC에 대한 내용을 확인하세요.
2. IETF를 방문해서 datatracker.ietf.org/wg/의 다양한 활성 작업 그룹을 살펴보세요.
3. IRTF를 방문해서 현재 진행 중인 연구를 살펴보세요.
4. ICANN 정보 페이지(<https://www.icann.org/get-started>)를 방문해서 ICANN 임무에 대해 알아보세요.
5. IAB 및 IETF의 (1990년까지의) 초기 역사를 보려면 RFC 1160을 읽어보세요.

1장 풀이

퀴즈

1. 네트워크 프로토콜은 네트워크에 있는 컴퓨터(혹은 다른 기기) 간 통신을 가능하게 하는 규칙 및 데이터 형식 집합입니다.
2. 앤드 노드 확인 및 동적 라우팅은 TCP/IP의 분산에 기여하는 두 기능입니다.
3. 도메인 이름 시스템, DNS는 도메인 이름을 IP 주소에 매핑하는 것을 담당합니다.
4. 비평 요청, RFC는 인터넷 표준 혹은 인터넷 운영을 돕는 실무 그룹 중 하나의 보고서를 설명합니다.
5. 포트는 올바른 네트워킹 애플리케이션에 데이터를 라우팅하기 위해 사용하는 논리 채널입니다.

1.8 핵심 용어

다음 핵심 용어를 복습하세요.

• ARPAnet: TCP/IP의 발상지였던 실험적인 네트워크입니다.
• 도메인 이름: TCP/IP의 DNS 이름 서비스 시스템을 통한 IP 주소와 관련된 영어와 숫자로 조합된 이름입니다.
• 게이트웨이: LAN을 대규모 네트워크에 연결하는 라우터로 독점적 LAN 프로토콜 시대에 게이트웨이는 일종의 라우터 프로토콜 변환 작업이라고도 했습니다.
• IP 주소: TCP/IP 네트워크에서 컴퓨터 또는 기타 네트워크 장치(예: 프린터)를 찾는 데 사용되는 논리 주소입니다.
• LAN(근거리 통신망): 단일 사무실, 조직 또는 가정에 속하는 소규모 네트워크. 일반적으로 단일 지리적 위치를 차지합니다.
• 논리 주소: 프로토콜 소프트웨어를 통해 구성된 네트워크 주소입니다.
• 이름 서비스: 사람에게 친숙한 영어와 숫자로 조합된 이름을 네트워크 주소와 연결하는 서비스로, 이 서비스를 제공하는 컴퓨터를 이름 서버라고 하며 이름을 주소로 확인하는 작업을 이름 확인이라고 합니다.
• 네트워크 프로토콜: 통신 프로세스의 특정 측면을 정의하는 공통 규칙 집합입니다.
• 물리 주소: 네트워크 하드웨어와 관련된 주소로, 이더넷 어댑터의 경우 실제 주소는 일반적으로 제조 공장에서 할당됩니다.
• 포트: 애플리케이션과 TCP/IP의 전송 계층 간에 인터페이스를 제공하는 내부 채널 또는 주소입니다.
• 독점: 기업과 같은 민간 기관에 의해 통제되는 기술입니다.
• 프로토콜 구현: 프로토콜 표준에 정의된 통신 규칙을 구현하는 소프트웨어 구성 요소입니다.
• 프로토콜 시스템 또는 프로토콜 스위트: 컴퓨터가 네트워크를 통해 통신할 수 있게 하는 상호 연결된 표준 및 절차(프로토콜) 시스템입니다.
• RFC: TCP/IP 또는 인터넷 관련 정보를 제공하는 공식 기술 문서. 인터넷의 여러 곳에서 RFC를 찾을 수   있습니다. www.rfc-editor.org를 방문해 보세요.
• 라우터: 논리 주소로 데이터를 전달하고 큰 네트워크를 더 작은 서브네트워크로 분할하는 데 사용할 수 있는 네트워크 장치입니다.
• TCP/IP(전송 제어 프로토콜/인터넷 프로토콜): 인터넷과 전 세계의 다른 네트워크에서 사용되는 네트워크 프로토콜 스위트입니다.

---

TCP/IP는 프로토콜의 시스템(또는 스위트)이며, 프로토콜은 규칙과 절차의 시스템입니다. 대부분의 경우, 통신 컴퓨터의 하드웨어 및 소프트웨어는 TCP/IP 통신 규칙을 따릅니다. 이때 사용자는 세부 내용을 알 필요는 없지만, 구성을 살펴보고 TCP/IP 네트워크에서 발생하는 문제를 해결하려면 TCP/IP에 대한 실무 지식이 필요합니다.

이 장에서는 TCP/IP 프로토콜 시스템을 설명하고 어떻게 TCP/IP 구성 요소가 함께 작동해서 네트워크를 통해 데이터를 보내고 받는지 알아보겠습니다.

이 장을 끝내고 나면,

• TCP/IP 프로토콜 시스템 계층과 각 계층의 목적을 설명할 수 있습니다.

• OSI 모델의 계층과 OSI 계층이 TCP/IP와 어떤 관련이 있는지 설명할 수 있습니다.

• TCP/IP 프로토콜 헤더와 프로토콜 스택의 각 계층에서 데이터가 어떻게 헤더 정보에 포함되는지 설명할 수 있습니다.

• TCP/IP 스택의 각 계층에서 데이터 패키지 이름을 말할 수 있습니다.

• TCP, UDP 및 IP 프로토콜과 함께 작동해서 TCP/IP 기능을 제공하는 방법을 설명할 수 있습니다.

2.1 TCP/IP 프로토콜 시스템

TCP/IP 요소를 알아보기 전에, 먼저 프로토콜 시스템이 하는 일을 간략하게 설명하겠습니다.

TCP/IP와 같은 프로토콜 시스템은 반드시 다음 작업을 담당해야 합니다.

• 전송 매체를 통해 메시지를 효율적으로 전달할 수 있게 관리 가능한 데이터로 나누기

• 네트워크 어댑터 하드웨어와 인터페이스하기

• 주소 지정하기(송신 컴퓨터는 보내고자 하는 데이터를 수신 컴퓨터로 주소로 지정해야 하며 수신 컴퓨터는 수신해야 하는 메시지를 인식할 수 있어야 합니다)

• 소스 서브넷과 대상 서브넷이 서로 다른 물리적 네트워크인 경우에도 대상 컴퓨터의 서브넷으로 데이터 라우팅하기

• 오류 제어, 흐름 제어 및 승인 수행하기(안정적인 통신을 위해 송수신 컴퓨터는 잘못된 전송을 식별, 수정하고 데이터 흐름을 제어할 수 있어야 합니다)

• 애플리케이션에서 데이터를 수락해 네트워크로 전달하기

• 네트워크에서 데이터를 수신해 애플리케이션으로 전달하기

이 작업을 수행하기 위해 TCP/IP 설계자는 모듈식 설계를 했습니다. TCP/IP 프로토콜 시스템은 이론적으로 서로 독립적 기능을 하는 구성 요소로 나뉘며, 각 구성 요소는 통신 프로세스를 담당합니다.

모듈식 설계는 공급 업체가 프로토콜 소프트웨어를 특정 하드웨어 및 운영 체제에 쉽게 적용할 수 있다는 장점이 있습니다. 예를 들면 (3장에서 배울) 네트워크 접근 계층은 물리적 네트워크의 사양 및 설계와 관련된 기능을 포함합니다. TCP/IP의 모듈식 설계 덕분에 마이크로소프트 같은 공급 업체는 (일반 이더넷 네트워크의 TCP/IP와는 반대로) 광섬유 네트워크에 전혀 다른 TCP/IP 소프트웨어 패키지를 구축할 필요가 없습니다. 게다가 상위 계층은 다른 물리적 아키텍처의 영향을 받지 않으며 네트워크 접근 계층만 변경되면 됩니다.

TCP/IP 프로토콜 시스템은 계층화된 구성 요소로 세분화되며, 각 구성 요소는 특정 업무를 수행합니다(그림 2-1 참조). 이러한 모델이나 스택(stack)은 초기 TCP/IP에서 가져왔으며, 종종 TCP/IP 모델이라고도 합니다. 공식 TCP/IP 프로토콜 계층 및 해당 기능은 다음 목록에 설명되어 있습니다. 이 목록에 나열된 기능과 이 절 앞부분에 나열된 기능을 비교해 보면, 프로토콜 시스템 작업이 계층 간 어떻게 분산되어 있는지 확인할 수 있습니다.

Note ≡ 많은 모델

그림 2-1에 표시된 4계층 모델은 TCP/IP 네트워킹을 설명하는 일반적인 모델이지만 유일한 모델은 아닙니다. 예를 들어 RFC 871에 설명된 ARPAnet 모델은 네트워크 인터페이스 계층, 호스트-호스트 계층 및 프로세스 레벨/응용 계층, 세 가지 계층을 설명합니다. 다른 종류의 TCP/IP는 (OSI와 일치시키기 위해) 네트워크 접근 계층 대신 물리 계층과 데이터 링크 계층이 있는 5계층 모델을 요구합니다. 또 다른 모델은 중간 계층보다 덜 균일하면서 정의하기 어려운 네트워크 접근 계층 또는 응용 계층을 제외할 수 있습니다.

계층의 이름 또한 다릅니다. ARPAnet 계층 이름은 TCP/IP와 관련되어 여전히 언급되고, 인터넷 계층은 때때로 인터네트워크(internetwork) 계층 또는 네트워크 계층이라고도 합니다.

책에서는 그림 2-1에 표시된 이름으로 4계층 모델을 사용합니다.

응용 계층
전송 계층
인터넷 계층
네트워크 접근 계층

▲ 그림 2-1 TCP/IP 모델의 프로토콜 계층

• 네트워크 접근 계층: 물리적 네트워크와의 인터페이스를 제공합니다. 전송 매체의 데이터를 포맷하고 물리적 하드웨어 주소를 기반으로 서브넷의 데이터를 처리합니다. 실제 네트워크에서 전달되는 데이터에 대한 오류 제어 기능을 합니다.

• 인터넷 계층: 하드웨어와 독립적으로 주소를 지정하는 기능을 통해 물리적 아키텍처가 다른 서브넷 간에 데이터를 전달합니다.

• 전송 계층: 인터네트워크에 대한 흐름 제어, 오류 제어 및 승인 서비스를 담당하며 네트워크 애플리케이션을 위한 인터페이스 역할을 합니다.

• 응용 계층: 네트워크 문제 해결, 파일 전송, 원격 제어 및 인터넷 활동을 위한 애플리케이션을 제공합니다. 또한, 특정 운영 환경을 위해 작성된 프로그램이 네트워크에 접근할 수 있도록 네트워크 API(애플리케이션 프로그래밍 인터페이스)를 지원합니다.

이후에 각 TCP/IP 프로토콜 계층에서의 활동에 대해 자세히 설명하겠습니다.

TCP/IP 프로토콜 소프트웨어가 네트워크를 통해 전송할 데이터를 준비할 때, 송신 시스템의 각 계층은 수신 시스템에 상응하는 계층 관련 데이터를 정보 계층에 추가합니다. 예를 들면 데이터를 전송하는 컴퓨터의 인터넷 계층은 메시지를 수신하는 컴퓨터의 인터넷 계층에 중요한 정보가 포함된 헤더를 포함합니다. 이 프로세스를 캡슐화(encapsulation)라고도 합니다. 수신 시스템에서 데이터가 프로토콜 스택으로 전달되면 헤더가 제거됩니다.

Note ≡ 계층

계층(layer)이라는 용어는 그림 2-1에 표시된 프로토콜 구성 요소 레벨에 대해 컴퓨터 산업 전반에서 사용됩니다. 헤더 정보는 프로토콜 스택의 구성 요소를 통과할 때 데이터에 여러 계층으로 적용됩니다(이 장 뒷부분에서 더 자세히 알아봅니다). 그런데 구성 요소 자체와 관련해서 계층이라는 용어는 다소 은유적인 표현입니다.

그림 2-1과 같은 다이어그램은 데이터가 일련의 인터페이스를 통과한다는 것을 보여줍니다. 인터페이스가 유지되는 동안에는 구성 요소 내의 프로세스는 다른 구성 요소의 프로세스로부터 영향을 받지 않습니다. 그림 2-1을 옆으로 돌려보면 조립 라인처럼 보이는데, 이는 프로토콜 구성 요소의 관계를 설명할 때 유용한 비유입니다. 데이터는 라인에서 일련의 단계를 진행하며 지정된 대로 각 단계에 도달하면 구성 요소가 독립적으로 작동합니다.

---

TCP/IP 그리고 OSI 모델

네트워크 산업에는 네트워크 프로토콜 아키텍처를 위한 OSI(Open Systems Interconnection) 모델이라는 표준 7계층 모델이 있습니다. OSI 모델은 국제 표준 기구인 ISO(International Organization for Standardization)가 네트워크 프로토콜 시스템의 설계를 표준화해 소프트웨어 개발자의 프로토콜 표준에 대한 상호 연결 및 개방형 접근을 촉진하려는 노력의 산물입니다.

OSI 표준 아키텍처가 개발될 때 TCP/IP는 이미 개발 과정에 있었고, 엄밀히 말하면 TCP/IP는 OSI 모델을 따르지 않습니다. 그러나 두 모델의 목표는 비슷했기에 표준을 맞추기 위해 설계자들 사이의 논의를 통해 호환될 수 있었습니다. OSI 모델은 프로토콜 구현의 성장 및 개발에 큰 영향을 미쳤으며, OSI 용어가 일반적으로 TCP/IP에 적용되는 것을 볼 수 있습니다.

그림 2-2는 4계층 TCP/IP 표준과 7계층 OSI 모드 간의 관계를 보여줍니다. OSI 모델은 응용 계층의 업무를 응용, 표현, 세션, 세 계층으로 나눕니다. OSI는 네트워크 접근 계층의 활동을 데이터 링크 계층과 물리 계층으로 나눕니다. 이처럼 세분화하면서 조금 복잡해지기는 하지만, 프로토콜 계층을 좀 더 구체적인 서비스로 지정해 개발자가 유연하게 작업할 수 있도록 합니다. 특히 네트워크 접근 계층을 데이터 링크 계층과 물리 계층으로 분할함으로써 통신 매체 접근과 관련된 기능에서 통신 구성과 관련된 기능을 분리합니다. OSI 상위 세 계층은 애플리케이션이 프로토콜 스택과 인터페이스할 수 있는 다양한 대안을 제공합니다.

TCP/IP|OSI
응용계층|응용계층
"|표현계층
"|세션 계층
전송계층 | 전송계층
인터넷계층 | 네트워크 계층
네트워크 접근 계층 | 데이터링크 계층
"|물리 계층

▲ 그림 2-2 7계층 OSI 모델

OSI 모델의 7계층은 다음과 같습니다.

• 물리 계층: 데이터를 실제 전송 매체를 지나는 전기 또는 아날로그 펄스 스트림으로 변환하며 데이터 전송을 감독합니다.

• 데이터 링크 계층: 네트워크 어댑터와의 인터페이스를 제공하며 서브넷의 논리적 링크를 유지합니다.

• 네트워크 계층: 논리 주소를 지정하고 라우팅을 지원합니다.

• 전송 계층: 인터네트워크에 대한 오류 제어 및 흐름 제어를 제공합니다.

• 세션 계층: 통신 컴퓨터의 통신 애플리케이션 간에 세션을 설정합니다.

• 표현 계층: 데이터를 표준 형식으로 변환합니다. 암호화 및 데이터 압축을 관리합니다.

• 응용 계층: 애플리케이션을 위한 네트워크 인터페이스를 제공하며 파일 전송, 통신 등을 위한 네트워크 애플리케이션을 지원합니다.

TCP/IP 모델과 OSI 모델은 구현이 아니라 표준이라는 것을 기억해야 합니다. TCP/IP의 실제 구현이 항상 그림 2-1과 2-2의 모델처럼 깔끔하게 매핑되는 것은 아니며, 그림 2-2에 묘사된 정확한 상응 관계 또한 네트워크 산업에서 논의되어야 할 문제이기도 합니다.

OSI 및 TCP/IP 모델은 중요한 전송 및 인터넷(OSI에서 네트워크라고 하는) 계층에서 가장 유사합니다. 이 계층에는 프로토콜 시스템에서 식별과 구별이 가장 잘 되는 구성 요소가 포함되기에 프로토콜 시스템이 전송 및 네트워크 계층 프로토콜에 따라 이름을 짓은 것도 우연의 일치는 아닙니다. 책 뒷부분에서 배우겠지만 TCP/IP 프로토콜 스위트의 이름은 전송 계층 프로토콜인 TCP와 인터넷/네트워크 계층 프로토콜인 IP를 따라 지었습니다
--

2.3 데이터 패키지

TCP/IP 프로토콜 스택에서 각 계층은 전체 통신 프로세스에서 특정 역할을 수행한다는 것을 꼭 기억해야 합니다. 각 계층은 해당 계층이 역할을 수행하는 데 필요한 서비스를 호출합니다. 전송 데이터가 스택을 통과하면서 각 계층에는 실제 데이터와 함께 헤더(header)라는 관련 정보 묶음이 포함됩니다. 헤더와 데이터를 포함하는 작은 데이터 패키지는 다음 하위 계층의 헤더와 함께 다음 하위 레벨에서 다시 한번 패키지됩니다. 해당 프로세스는 그림 2-3에서 볼 수 있습니다. 수신 컴퓨터에서 데이터를 수신하면 역 프로세스가 발생합니다. 데이터가 스택을 통해 위로 이동하면 각 계층은 상응하는 헤더의 압축을 풀어 해당 정보를 사용합니다.

데이터가 스택을 따라 내려가는 모습은 여러 겹으로 된 러시아 나무 인형과 같습니다. 가장 안쪽의 인형은 다른 인형이 감싸고, 또 다른 인형이 그 인형을 감쌉니다. 수신 측에서는 데이터가 프로토콜 스택으로 다시 올라가면서 데이터 패키지의 압축이 하나씩 풀립니다. 수신 시스템의 인터넷 계층은 인터넷 계층의 헤더 정보를 사용하며, 전송 계층은 전송 계층의 헤더 정보를 사용합니다. 각 계층에서 데이터 패키지는 수신 시스템의 해당 계층에 필요한 정보를 제공하는데, 각 계층은 서로 다른 기능을 담당하므로 기본 데이터 패키지의 형식은 계층마다 매우 다릅니다.

▲ 그림 2-3 각 계층에서 데이터는 해당 계층의 헤더로 다시 패키지된다

Note ≡ 인형 옮기기

네트워크 산업에서는 줄임말만큼 비유도 많이 사용하는데, 다른 비유와 마찬가지로 러시아 인형에 비유한 것 역시 요점을 잘 나타내지만 완벽하진 않습니다. 일반적으로 이더넷과 같은 물리적 네트워크를 보면 데이터는 네트워크 접근 계층에서 더 작은 단위로 나뉩니다. 더 정확하게 비유하자면 가장 낮은 계층이 중심이 같은 인형 시스템을 더 작은 조각으로 쪼개고, 조각을 더 작은 인형으로 캡슐화한 다음, 작은 인형을 1과 0의 패턴으로 바꿉니다. 1과 0을 수신하면 작은 인형으로 재구성하고 중심이 같은 인형 시스템으로 재구성됩니다. 이렇게 작동 방식이 복잡하기 때문에 많은 사람이 더 이상 단순히 인형에 비유해 설명하지 않습니다.

데이터 패킷은 계층마다 다른 모습과 이름으로 표시됩니다. 각 계층에서 생성된 데이터 패키지의 이름은 다음과 같습니다.

• 응용 계층에서 생성된 데이터 패키지를 메시지(message)라고 합니다.

• 응용 계층 메시지를 캡슐화하는 전송 계층에서 생성된 데이터 패키지를 전송 계층의 TCP 프로토콜에서 가져왔다면 세그먼트(segment)라고 합니다. 데이터 패키지를 전송 계층의 UDP(User Datagram Protocol) 프로토콜에서 가져왔다면 이를 데이터그램(datagram)이라고 합니다.

• 전송 계층 세그먼트를 캡슐화하는 인터넷 계층의 데이터 패키지는 데이터그램이라고 합니다.

• 데이터그램을 캡슐화하고 세분화할 수 있는 네트워크 접근 계층의 데이터 패키지는 프레임(frame)이라고 합니다. 그리고 해당 프레임은 네트워크 접근 계층의 가장 낮은 하위 계층에서 비트 스트림으로 바뀝니다.

솔직히 말해 사람들은 더이상 서로 다른 프로토콜 패키지 이름을 사용하지 않습니다. ‘패킷’이라는 단어는 어떤 프로토콜 레벨에서든 데이터 패키지를 기술할 때 (명확하지 않은 경우) 사용하는 속어가 되었지만, 실제로 프로토콜 패키지 이름이 서로 다르기 때문에 프로토콜 패키지는 서로 다른 이름을 가진다고 생각하면 됩니다. 각 계층은 목적도 다르며, 각 헤더에는 다른 정보가 포함되어 있습니다. 나중에 각 계층의 데이터 패키지에 대해 자세히 알아보겠습니다.

2.6 Q&A

Q. TCP/IP 모듈식 설계의 주요 장점은 무엇입니까?

A. TCP/IP의 모듈식 설계 덕분에 TCP/IP 프로토콜 스택은 특정 하드웨어 및 운영 환경에 쉽게 적응할 수 있습니다. 계층 하나는 스택의 나머지 부분에 영향을 주지 않고 변경될 수 있습니다. 네트워킹 소프트웨어를 잘 설계된 특정 구성 요소로 나누면 프로토콜 시스템과 상호 작용하는 프로그램을 더욱더 쉽게 작성할 수 있습니다.

Q. 네트워크 접근 계층에서는 어떤 기능을 제공합니까?

A. 네트워크 접근 계층은 특정 물리적 네트워크와 관련된 서비스를 제공합니다. 이러한 서비스에는 이더넷 케이블과 같은 특정 전송 매체를 통한 프레임 준비, 송신 및 수신이 포함됩니다.

Q. TCP/IP 인터넷 계층에 해당하는 OSI 계층은 무엇입니까?

A. TCP/IP의 인터넷 계층은 OSI 네트워크 계층에 해당합니다.

Q. 왜 TCP/IP 프로토콜 스택의 각 계층에 헤더 정보가 포함되어 있습니까?

A. 수신 시스템의 각 프로토콜 계층이 수신 데이터를 처리하려면 다른 정보가 필요하기 때문에 송신 시스템의 각 계층은 헤더 정보를 포함합니다.

2.7 워크숍

워크숍은 일련의 퀴즈와 연습 문제로 이루어져 있습니다. 퀴즈는 배운 내용을 잘 이해했는지 테스트하기 위한 것입니다. 연습 문제는 이 장에서 배운 개념을 적용해 보는 것이니 시간을 충분히 가지고 문제를 풀어 보세요. 해답은 부록 A를 참고하세요.

2.7.1 퀴즈

1. TCP/IP 네트워크 접근 계층에 대응되는 두 개의 OSI 계층은 무엇입니까?

2. 한 네트워크 세그먼트에서 다른 네트워크 세그먼트로 데이터를 라우팅하는 데 어떤 TCP/IP 계층이 있습니까?

3. TCP와 비교할 때 UDP의 장단점은 무엇입니까?

4. 계층과 데이터를 캡슐화한다는 것은 무엇을 의미합니까?

2.7.2 연습 문제

1. TCP/IP 스택에서 각 계층이 수행하는 기능을 나열하세요.

2. 데이터그램을 다루는 계층을 나열하세요.

3. 새로 발명된 유형의 네트워크 하드웨어를 사용하기 위해 TCP/IP를 어떻게 변경해야 하는지 설명하세요.

4. TCP가 신뢰할 수 있는 프로토콜이라는 말의 의미를 설명하세요.

2장 풀이

퀴즈

1. 데이터 링크 계층 및 물리 계층

2. 인터넷 계층

3. UDP는 더 단순하고 빠르지만 TCP가 가진 오류 검사 및 흐름 제어가 없습니다.

4. 계층 특정 헤더는 다음 계층에 전달되기 전에 데이터에 추가됩니다.

연습 문제

1. TCP/IP 계층의 기능은 다음과 같습니다.

• 네트워크 접근 계층: 네트워크 하드웨어에 인터페이스를 제공합니다.

• 인터넷 계층: 데이터그램을 위한 논리적 주소지정 및 라우팅을 제공합니다.

• 전송 계층: 오류 검사, 흐름 제어 및 승인 서비스를 제공합니다.

• 응용 계층: 네트워크 문제 해결 기능, 파일 전송, 원격 제어 및 기타 네트워크 기반 유틸리티를 제공합니다. 또한, 애플리케이션 프로그램이 네트워크에 접근할 수 있도록 API를 제공합니다.

2. IP 및 전송 계층은 데이터그램을 다룹니다.

3. 새 네트워크 계층만 작성하면 됩니다. 스택의 나머지는 그대로 둡니다.

4. 신뢰할 수 있다는 것은 TCP가 오류 확인 및 승인을 사용하여 가능하다면 TCP 세그먼트가 전달되는지 확인하는 것을 의미합니다.

워크숍으로

2.8 핵심 용어

다음 핵심 용어를 복습하세요.

• ARP(주소 확인 프로토콜): 논리적 IP 주소를 물리 주소로 확인하는 프로토콜

• 응용 계층: 네트워크 애플리케이션을 지원하고 로컬 운영 환경에 대한 인터페이스를 제공하는 TCP/IP 스택의 계층

• 데이터그램: 인터넷 계층과 네트워크 접근 계층 간에 전달되는 데이터 패키지 또는 전송 계층과 인터넷 계층에서 UDP 간에 전달되는 데이터 패키지

• 프레임: 네트워크 접근 계층에서 생성된 데이터 패키지

• 헤더: 프로토콜 스택의 각 계층에서 데이터에 연결된 프로토콜 정보 묶음

• 인터넷 계층: 논리 주소 지정 및 라우팅을 제공하는 TCP/IP 스택의 계층

• IP(인터넷 프로토콜): 논리 주소 지정 및 라우팅 기능을 제공하는 인터넷 계층 프로토콜

• 메시지: TCP/IP 네트워킹에서 메시지는 응용 계층과 전송 계층 간에 전달되는 데이터 패키지(일반적으로 네트워크의 한 부분에서 다른 부분으로 이동하는 메시지를 말하기도 하지만 이 용어가 항상 응용 계층 데이터 패키지를 의미하는 것은 아닙니다)

• 네트워크 접근 계층: 물리적 네트워크와의 인터페이스를 제공하는 TCP/IP 스택의 계층

• 세그먼트: 전송 계층의 TCP와 인터넷 계층 간 전달된 데이터 패키지

• TCP(전송 제어 프로토콜): 전송 계층의 안정적인 연결 지향 프로토콜

• 전송 계층: 오류 제어 및 승인을 제공하고 네트워크 애플리케이션의 인터페이스 역할을 하는 TCP/IP 스택의 계층

• UDP(사용자 데이터그램 프로토콜): 전송 계층의 신뢰할 수 없는 비연결 프로토콜

TCP/IP 프로토콜 스택은 기본적으로 네트워크 접근 계층, 서비스 모음 및 네트워크 하드웨어에 대한 접근을 관리 및 제공하는 사양으로 구성되어 있습니다. 이 장에서는 네트워크 접근 계층의 역할과 네트워크 접근 계층이 OSI 모델과 어떤 관련이 있는지 알아보겠습니다. 또한, 이더넷으로 알려진 네트워크 기술을 자세히 살펴보겠습니다.

이 장을 끝내고 나면,

• 네트워크 접근 계층을 설명할 수 있습니다.

• TCP/IP의 네트워크 접근 계층이 OSI 네트워크 모델과 어떻게 관련되는지 설명할 수 있습니다.

• 네트워크 아키텍처의 목적을 설명할 수 있습니다.

• 이더넷 프레임의 내용을 나열할 수 있습니다.

3.1 프로토콜과 하드웨어

네트워크 접근 계층은 TCP/IP 계층 중 가장 복잡하고 균일하지 않은 계층으로, 물리적 네트워크에 대한 데이터를 준비하는 데 필요한 모든 서비스와 기능을 관리합니다. 즉, 다음과 같은 역할을 수행합니다.

• 컴퓨터의 네트워크 어댑터와 인터페이스

• 적절한 접근 방법의 규칙을 통한 데이터 전송 조정

• 데이터를 전송 매체를 지나는 전기 또는 아날로그 펄스 스트림으로 변환

• 수신 데이터의 오류 확인

• 수신 컴퓨터가 데이터의 오류를 확인할 수 있게 발신 데이터에 오류 검사 정보 추가

당연히 송출하는 데이터에 대해 형식을 지정하는 모든 작업은 데이터가 주소가 지정된 컴퓨터에 수신되면 반대로 수행되어야 합니다.

네트워크 접근 계층은 네트워크 하드웨어와 인터페이스하고 전송 매체에 접근하는 절차를 정의합니다. TCP/IP의 네트워크 접근 계층에서는 하드웨어, 소프트웨어 및 전송 매체 사양의 복잡한 상호 작용이 이루어집니다. 간단히 설명하자면 고유한 규칙을 가진 여러 유형의 물리적 네트워크가 있으며, 이러한 물리적 네트워크는 모두 네트워크 접근 계층의 기초를 형성합니다. 단일 물리적 네트워크에서도 다른 어댑터와 드라이버는 다르게 작동할 수 있습니다.

일반 사용자는 실제로 네트워크 접근 계층이 하는 일을 거의 볼 일이 없습니다. 운영 체제 및 프로토콜 소프트웨어의 주요 하위 수준 구성 요소와 결합한 네트워크 어댑터 드라이버는 네트워크 접근 계층으로 위임된 대부분의 작업을 관리하며, 일반적으로 사용자는 몇 가지 간단한 필수 구성 단계만 처리하면 됩니다. 이러한 단계는 데스크톱 운영 체제의 향상된 플러그 앤드 플레이 및 자동 구성 기능으로 점점 더 간단해지고 있습니다.

이 장을 읽으면서 1, 2, 4, 5장에서 얘기하는 논리적 IP 스타일의 주소 지정은 전적으로 소프트웨어에 있음을 명심하세요. 프로토콜 시스템은 특정 LAN 시스템과 대상 컴퓨터의 네트워크 어댑터를 통해 데이터를 전달하기 위해서는 추가적인 서비스가 필요합니다. 이러한 서비스는 네트워크 접근 계층에 있습니다.

Note ≡ 사느냐 죽느냐

네트워크 접근 계층의 다양성, 복잡성 및 투명성 때문에 일부 설계자는 스택이 인터넷 계층 아래 LAN 드라이버에 있다고 주장하면서, TCP/IP에 관한 토론에서 네트워크 접근 계층에 대한 주제를 제외했습니다. 이러한 관점은 어느 정도 일리가 있지만, 네트워크 접근 계층은 실제로 TCP/IP의 일부이므로 네트워크 접근 계층을 제외하고 네트워크 통신 프로세스를 논의한다는 것은 적절하다고 할 수 없습니다.

3.2 네트워크 접근 계층과 OSI 모델

2장에서 언급했듯이 TCP/IP는 공식적으로 7계층 OSI 네트워킹 모델과 독립적이지만, OSI 모델은 종종 프로토콜 시스템을 이해하는 데 일반적인 프레임워크로 사용됩니다. OSI 모델은 광범위한 네트워크 접근 범위 안에서 별도로 세분화하기 때문에 OSI 용어와 개념은 네트워크 접근 계층을 논의할 때 일반적으로 사용합니다. 이러한 세분화는 해당 계층의 내부 작동을 이해하는 데 조금이나마 도움이 됩니다.

그림 3-1에서 볼 수 있듯이 TCP/IP 네트워크 접근 계층은 OSI 물리 계층과 데이터 링크 계층에 해당한다고 할 수 있습니다. OSI 물리 계층은 데이터 프레임을 전송 매체에 적합한 비트 스트림으로 변환하는 역할을 합니다. 다시 말해, OSI 물리 계층은 실제 전송을 형성하는 전기 또는 아날로그 펄스를 관리하고 동기화합니다. 수신 측의 물리 계층은 이러한 펄스를 데이터 프레임으로 재조합합니다.

응용계층|상위 OSI 계층
전송계층|"
인터넷계층|"
네트워크 접근 계층 |데이터링크계층 <- 미디어 접근 제어 하위 계층 / 논리적 링크 제어 하위게층
" | 물리 계층

TCP/IP | OSI

▲ 그림 3-1 OSI와 네트워크 접근 계층

OSI 데이터 링크 계층은 두 가지 개별 기능을 수행하며 다음 두 하위 계층으로 다시 나뉩니다.

• 미디어 접근 제어(MAC, Media Access Control): 이 하위 계층은 네트워크 어댑터와의 인터페이스를 제공합니다. 실제로 네트워크 어댑터 드라이버를 종종 MAC 드라이버라고 하며, 공장 출하 시 카드에 기록된 물리적 하드웨어 주소를 MAC 주소라고도 합니다.

• 논리 링크 제어(LLC, Logical Link Control): 이 하위 계층은 서브넷을 통해 전달된 프레임의 오류를 검사하고 서브넷에서 통신하는 장치 간의 링크를 관리합니다.

3.3 네트워크 아키텍처

실제로 LAN은 프로토콜 계층의 관점이 아닌 LAN 아키텍처 또는 네트워크 아키텍처 관점에서 바라봐야 합니다(네트워크 아키텍처를 LAN 유형 또는 LAN 토폴로지라고도 합니다). 이더넷과 같은 네트워크 아키텍처는 미디어 접근, 물리 주소 지정 및 컴퓨터와 전송 매체의 상호 작용을 제어합니다. 실제로 네트워크 아키텍처를 결정하면 네트워크 접근 계층의 디자인이 따라서 결정됩니다.

네트워크 아키텍처는 실제 네트워크를 위한 설계이며 해당 네트워크의 통신을 정의하는 사양의 모음입니다. 통신 세부 사항은 실제 세부 사항에 따라 달라서 일반적으로 사양이 전체 패키지로 함께 제공됩니다. 이러한 사양에는 다음과 같은 고려 사항을 포함합니다.

• 접근 방법: 접근 방법은 컴퓨터가 전송 매체를 공유하는 방법을 정의하는 일련의 규칙입니다. 데이터 충돌을 피하려면 컴퓨터가 데이터를 전송할 때 이 규칙을 따라야 합니다.

• 데이터 프레임 형식: 인터넷 계층의 IP 수준 데이터그램은 미리 정의된 형식의 데이터 프레임으로 캡슐화됩니다. 헤더에 포함된 데이터는 실제 네트워크에서 데이터를 전달하는 데 필요한 정보를 제공해야 합니다. 이 장 뒷부분에서 데이터 프레임을 자세히 알아보겠습니다.

• 케이블 연결 유형: 네트워크에 사용되는 케이블 유형은 어댑터가 전송하는 비트 스트림의 전기적 특성과 같은 특정 기타 설계 매개변수에 영향을 줍니다.

• 케이블 연결 규칙: 프로토콜, 케이블 유형 및 전기적 특성은 케이블 및 케이블 커넥터 사양의 최대 및 최소 길이에 영향을 미칩니다.

케이블 유형 및 커넥터 유형 같은 세부 사항은 네트워크 접근 계층에 직접적인 책임이 있진 않지만, 네트워크 접근 계층의 소프트웨어 구성 요소를 설계하려면 개발자는 물리적 네트워크에 대한 특정한 특성 집합을 반드시 가정해야 합니다. 따라서 네트워크 접근 소프트웨어는 반드시 특정 하드웨어 설계와 함께 제공되어야 합니다.

중요한 점은 네트워크 접근 상위 계층은 하드웨어 설계에 대해 걱정할 필요가 없다는 것입니다. TCP/IP 스택은 하드웨어와의 상호 작용에 대한 모든 세부 사항이 네트워크 접근 계층에서 발생하도록 설계되었습니다. 이 디자인 덕분에 TCP/IP가 다양한 전송 매체를 통해 작동할 수 있습니다.

네트워크 접근 계층에 있는 일부 아키텍처는 다음과 같습니다.

• IEEE 802.3(이더넷): 사무실과 가정에서 많이 사용되는 일반적인 케이블 기반 네트워크

• IEEE 802.11(무선 네트워킹): 사무실과 가정, 커피숍에서 사용되는 무선 LAN 네트워크 기술

• IEEE 802.16(WiMAX): 장거리 모바일 무선 연결에 사용되는 네트워크 기술

• PPP(Point-to-Point Protocol): 전화선을 통한 모뎀 연결에 사용되는 프로토콜

TCP/IP는 다른 네트워크 아키텍처도 지원합니다. 그림 3-2에서 볼 수 있듯이 각 경우에 프로토콜 스택의 모듈형 특성은 해당 표준에서 작동하는 하드웨어 인식 소프트웨어 구성 요소가 논리 주소 지정과 같은 서비스를 지원하는 하드웨어 독립적 상위 계층과 인터페이스할 수 있음을 의미합니다.

응용계층
전송계층
인터넷계층
| | |
네트워크 접근 계층 [802.11 무선, 이더넷, 모뎀]

▲ 그림 3-2 네트워크 접근 계층은 전송 매체의 세부 사항을 캡슐화하므로 스택의 상위 계층은 하드웨어와 독립적으로 작동할 수 있다

사용자는 복잡한 프로토콜 계층 인터페이스를 볼 수 없지만 운영 체제에서 네트워크를 구성하는 대화 상자를 통해 하드웨어 기반 계층과 논리 주소 지정 계층 간의 관계를 엿볼 수 있습니다. 예를 들어 그림 3-3은 이더넷, 블루투스, 모뎀 및 애플의 IEEE 802.11 응용 기능인 ‘AirPort’를 비롯해서 다양한 아키텍처를 TCP/IP 구성과 연결할 수 있는 macOS X 구성 대화 상자를 보여줍니다.

▲ 그림 3-3 대부분의 운영 체제에서는 다양한 네트워크 아키텍처를 TCP/IP 구성과 연결할 수 있다
이후 장에서 모뎀, 무선 네트워크 및 기타 네트워킹 기술을 자세히 알아보겠습니다.

네트워크 접근 계층 내에서 발생하는 문제 및 솔루션 유형의 예로 이더넷이라는 중요하고 보편적인 아키텍처를 다음 절에서 자세히 살펴보겠습니다. 대부분의 가정 또는 사무실 컴퓨터 뒷면에 연결된 케이블은 이더넷 케이블이며, 네트워크의 컴퓨터는 특정 형태의 이더넷 네트워킹을 사용해 통신하고 있습니다. 노트북, 스마트 폰 및 기타 무선 장치를 홈 네트워크에 연결하는 무선 허브 또한 이더넷 케이블을 사용해 유선 네트워크에 테더링됩니다. 이 장에서 이더넷은 네트워크 접근 계층 프로토콜 시스템의 한 예임을 명심하세요. 이후에 전화 접속, 디지털 가입자 회선(DSL, Digital Subscriber Line), 무선 및 광역 네트워킹 방법 같은 다른 하드웨어 기술을 살펴볼 때 기술마다 네트워크 접근 프로토콜 및 드라이버를 위한 고유한 설계를 반영한 요구 사항이 있음을 꼭 기억하세요.

3.4 물리 주소

이전 장에서 배웠듯이 네트워크 소프트웨어 계층은 프로토콜 소프트웨어를 통해 구성된 논리 IP 주소와 네트워크 어댑터의 실제 영구 물리 주소를 연결하는 데 필요합니다. OSI 모델 내에서 물리 주소 지정은 MAC 하위 계층이 담당해서 물리 주소(physical address)를 종종 MAC 주소라고 합니다. 물리 주소 지정 시스템은 네트워크 접근 계층 내에 캡슐화되므로 네트워크 아키텍처 사양에 따라 주소가 다른 형식을 취할 수 있습니다.

이더넷에서 물리 주소는 공장 출고 시 네트워킹 하드웨어에 입혀지는 경우가 있지만, 일부 최신 네트워크 어댑터는 프로그래밍이 가능한 물리 주소를 제공합니다. 몇 년 전만 해도 이더넷 하드웨어는 거의 항상 컴퓨터의 확장 슬롯에 삽입된 네트워크 어댑터 카드였지만, 최근에는 공급 업체에서 머더보드에 이더넷 기능을 넣기 시작했습니다.

LAN을 통해 전송된 데이터 프레임은 이러한 물리 주소를 사용해 소스 및 대상 어댑터를 식별해야 하지만, 긴 물리 주소(이더넷에서는 48비트)는 사람들이 사용하기에는 실용적이지 않습니다. 또한, 상위 프로토콜 수준에서 물리 주소를 인코딩하면 TCP/IP의 유연한 모듈식 아키텍처와 맞지 않게 되므로 상위 계층이 물리적 세부 사항과 독립적으로 유지되어야 합니다. TCP/IP는 ARP 및 RARP를 사용해 IP 주소를 로컬 네트워크에 있는 네트워크 어댑터의 물리 주소와 연결합니다. ARP 및 RARP는 사용자가 보는 논리 IP주소와 LAN에서 사용되는 (보이지 않는) 하드웨어 주소를 연결합니다. 4장에서 ARP와 RARP를 자세히 살펴보겠습니다.

이더넷 소프트웨어가 사용하는 주소는 논리 IP 주소와 동일하지 않지만, 물리 주소는 인터넷 계층과의 인터페이스에서 IP 주소에 매핑됩니다.

3.5 이더넷

유선 이더넷은 한때 전 세계에서 지배적인 LAN 기술이었습니다. 최근에는 무선 네트워크와 모바일 인터넷 기술이 PC 시장에서 크게 자리 잡고 있지만, 기존 이더넷은 사무실과 가정의 네트워크로 여전히 많이 사용되고 있습니다.

이더넷 아키텍처가 인기 있는 이유는 저렴한 가격에 있습니다. 이더넷 케이블은 싸고 쉽게 설치할 수 있습니다. 이더넷 네트워크 어댑터 및 이더넷 하드웨어 구성 요소도 비교적 저렴합니다. 유선 이더넷은 일반적으로 동급 무선 기술보다 빠르며, 케이블은 스누핑(snooping) 및 무선 네트워크와 관련된 기타 보안 문제에 대한 기본적인 보안 장벽을 제공합니다. 그러나 802.11 무선 네트워킹은 이 장에서 설명한 유선 이더넷 시스템과 실제로는 크게 다르지 않습니다. 물리적 매체는 상당히 다르지만, 충돌 감지 및 물리 주소 지정의 근본적인 문제는 매우 유사합니다. 실제로 무선 네트워킹은 원래 이더넷 사양의 많은 원칙을 통합하기 때문에 종종 ‘무선 이더넷’이라고도 합니다.

전통적인 이더넷 네트워크는 모든 컴퓨터에 공통 전송 매체를 공유합니다. 이더넷은 컴퓨터가 접근 매체로 데이터를 자유롭게 전송할 수 있는 시점을 결정하기 위해 반송파 감지 다중 접속/충돌 탐지(CSMA/CD, Carrier Sense Multiple Access with Collision Detection)라는 접근 방법을 사용합니다. CSMA/CD를 사용해서 모든 컴퓨터는 전송 매체를 모니터에 전송하기 전에 사용 가능한 회선이 있을 때까지 대기합니다. 두 대의 컴퓨터가 동시에 전송을 시도하면 충돌이 발생하는데, 이때 컴퓨터는 중지되어 임의의 시간 동안 대기했다가 다시 전송합니다.

CSMA/CD는 친절한 사람들로 가득 찬 방으로 비유할 수 있습니다. 먼저 말하고 싶은 사람은 다른 사람이 현재 말하는 중인지 판단합니다(반송파 감지). 두 사람이 동시에 말을 시작하면 두 사람 모두 문제를 감지하고 말을 멈춘 뒤 다시 말하기 전까지 기다립니다(충돌 탐지).

기존 이더넷은 사용량이 많으면 충돌률이 높아집니다. 최신 이더넷 네트워크에서는 네트워크 스위치 같은 장치가 트래픽을 관리해 충돌 발생이 줄어들어 이더넷이 더욱 효율적으로 작동하게 됩니다. 9장에서 허브 및 스위치를 더 자세히 알아보겠습니다.

이더넷은 다양한 매체를 사용할 수 있습니다. 기존의 허브 기반 10 BASE-T 이더넷은 원래 10Mbps의 기저 대역 속도에서 작동하도록 설계되었지만, 현재는 100Mbps ‘고속 이더넷’이 매우 일반적입니다. 또한, 1,000Mbps(기가비트) 이더넷 시스템도 가능합니다. 초기 이더넷 시스템은 종종 연속 동축 케이블을 전송 매체로 사용했지만(그림 3-4), 지금은 일반적으로 컴퓨터를 단일 네트워크 장치에 연결합니다(그림 3-5).

PC-PC-PC-PC

▲ 그림 3-4 초기 이더넷 네트워크에서 컴퓨터는 모두 단일 동축 케이블에 연결됐다

PC PC PC PC
|  |  |  |
[---------]

▲ 그림 3-5 최신 이더넷 네트워크에서 컴퓨터는 일반적으로 스위치와 같은 중앙 네트워크 장치에 연결된다

3.6 이더넷 프레임 분석

네트워크 접근 계층 소프트웨어는 인터넷 계층에서 데이터그램을 받아 해당 데이터를 실제 네트워크 사양과 일치하는 형식으로 변환합니다(그림 3-6 참조). 이더넷의 경우 네트워크 접근 계층의 소프트웨어는 네트워크 어댑터 카드의 하드웨어를 통해 전송할 데이터를 형식화해야 합니다.

인터넷계층데이터 -> 네트워크 접근 계층 -> HW =-=-=-=

▲ 그림 3-6 네트워크 접근 계층은 실제 네트워크에 대한 데이터를 형식화한다

이더넷 소프트웨어가 인터넷 계층에서 데이터그램을 수신하면 다음 단계를 수행합니다.

1. 필요하다면 인터넷 계층 데이터를 이더넷 프레임의 데이터 필드에 전송되는 작은 조각으로 분리합니다. 이더넷 프레임의 총 크기는 프리앰블(preamble)을 포함하지 않고 64바이트에서 1,518바이트 사이여야 합니다(일부 시스템은 최대 9000바이트의 확장된 프레임 크기를 지원합니다. 소위 점보 프레임이라고도 하는데, 효율성은 향상하지만, 일부 호환성 문제가 발생하며 보편적으로 지원되지 않습니다).

2. 데이터 조각을 프레임으로 패키징합니다. 각 프레임에는 데이터와 이더넷의 네트워크 어댑터가 프레임을 처리하는 데 필요한 기타 정보가 포함됩니다. IEEE 802.3 이더넷 프레임에는 다음이 포함됩니다.

• 프리앰블: 프레임의 시작을 표시하는 데 사용되는 일련의 비트입니다(8바이트, 마지막 1바이트는 시작 프레임 구분자임).

• 수신자 주소: 프레임을 받을 네트워크 어댑터의 6바이트(48비트) 물리 주소입니다.

• 소스 주소: 프레임을 보내는 네트워크 어댑터의 6바이트(48비트) 물리 주소입니다.

• 선택적 VLAN 태그: 802.1q 표준에 따른 선택적 16비트 필드는 여러 개의 가상 LAN이 동일한 네트워크 스위치를 통해 작동할 수 있게 설계되었습니다.

• 길이: 데이터 필드의 크기를 나타내는 2바이트(16비트) 필드입니다.

• 데이터: 프레임과 함께 전송되는 데이터입니다.

• 프레임 검사 순서(FCS, Frame Check Sequence): 프레임의 4바이트(32비트) 체크섬(checksum)(
1 역주 ‘검사합’이라고도 하며, 간단하게 에러를 검출하는 방법입니다.) 값입니다. FCS는 데이터 전송을 확인하는 일반적인 방법입니다. 송신 컴퓨터는 프레임에 대한 주기적 덧붙임 검사(CRC, Cyclic Redundancy Check) 값을 계산하고 CRC 값을 프레임에 인코딩합니다. 그런 다음 수신 컴퓨터는 CRC를 다시 계산하고 FCS 필드를 확인해 값이 일치하는지 확인합니다. 값이 일치하지 않으면 전송 중에 일부 데이터가 손실되거나 변경되었음을 의미하며, 이때 상위 프로토콜이 재전송을 요청할 수 있습니다.

3. 데이터 프레임을 OSI의 물리 계층에 해당하는 하위 레벨 구성 요소로 전달합니다. 이 계층은 프레임을 비트 스트림으로 변환해 전송 매체를 통해 전송합니다.

이더넷 네트워크의 다른 네트워크 어댑터는 프레임을 수신하고 대상 주소를 확인합니다. 대상 주소가 네트워크 어댑터의 주소와 일치하면 어댑터 소프트웨어는 들어오는 프레임을 처리하고 프로토콜 스택의 상위 계층으로 데이터를 전달합니다.
3.7 요약

이 장에서는 TCP/IP 프로토콜 스택에서 가장 다양하면서 복잡한 계층인 네트워크 접근 계층을 알아봤습니다. 네트워크 접근 계층은 네트워크 하드웨어와 인터페이스하고 전송 매체에 접근하는 절차를 정의합니다. LAN 아키텍처에는 여러 가지 유형이 있으며, 따라서 네트워크 접근 계층에도 다양한 사양이 있습니다. 또한, 네트워크 접근 계층이 데이터 전송을 처리하는 방법의 예로 이더넷을 자세히 살펴봤습니다.

이더넷 기술은 흔히 사용되지만, 컴퓨터를 연결하는 다른 방법도 많이 있습니다. 모든 네트워킹 기술에는 실제 네트워크에 대한 데이터를 준비시킬 수 있는 수단이 있어야 합니다. 따라서 모든 TCP/IP 기술에는 네트워크 접근 계층이 있어야 합니다. 나중에 모뎀, 무선 LAN, 모바일 네트워킹 및 WAN 기술 같은 다른 물리적 네트워크 시나리오에 관해서도 자세히 알아보겠습니다.

3.8 Q&A

Q. 네트워크 접근 계층에 정의된 서비스의 종류는 무엇이 있습니까?

A. 네트워크 접근 계층에는 실제 네트워크에 접근하는 프로세스를 관리하는 서비스 및 사양이 포함되어 있습니다.

Q. TCP/IP 네트워크 접근 계층에 해당하는 OSI 계층은 무엇입니까?

A. 네트워크 접근 계층은 OSI 데이터 링크 계층 및 물리 계층과 대략적으로 일치합니다.

Q. 가장 일반적인 LAN 아키텍처는 무엇입니까?

A. 무선 LAN 기술이 점차 대중화되고 있지만, 가장 일반적인 LAN 아키텍처는 이더넷입니다.

Q. CSMA/CD는 무엇입니까?

A. CSMA/CD는 이더넷이 사용하는 네트워크 접근 방법으로, 충돌 감지 기능을 갖춘 반송파 감지 다중 접속 기술입니다. CSMA/CD에서 네트워크의 컴퓨터는 전송을 잠시 기다렸다가 두 컴퓨터가 한 번에 전송을 시도하면 중지하고 잠시 동안 대기한 후 재전송합니다.

3.9 워크숍

워크숍은 일련의 퀴즈와 연습 문제로 이루어져 있습니다. 퀴즈는 배운 내용을 잘 이해했는지 테스트하기 위한 것입니다. 연습 문제는 이 장에서 배운 개념을 적용해 보는 것이니 시간을 충분히 가지고 문제를 풀어 보세요. 해답은 부록 A를 참고하세요.

3.9.1 퀴즈

1. CRC는 무엇입니까?

2. 이더넷 네트워크에서 충돌 감지란 무엇입니까?

3. 이너넷 물리 주소는 얼마나 큽니까?

4. ARP가 하는 일은 무엇입니까?

3.9.2 연습 문제

1. 물리 주소와 IP 주소를 연결하는 두 가지 프로토콜을 나열하세요.

2. 최소 세 가지 네트워크 아키텍처를 나열하세요.

3. OSI 매체 접근 제어 및 논리 링크 제어 계층이 수행하는 기능을 설명하세요.

3장 풀이

퀴즈

1. CRC(주기적 덧붙임 검사)는 프레임의 데이터가 손상되지 않았다는 것을 확인하기 위해 사용하는 체크섬입니다.

2. 충돌은 이더넷은 두 노드가 동시에 전송하기 시작했을 때 발생합니다. 노드에서 이를 감지하는 것을 충돌 감지가 발생했다고 합니다.

3. 이더넷 물리 주소는 48비트입니다.

4. ARP는 물리 주소와 논리 IP 주소 간 링크를 제공합니다.

연습 문제

1. ARP와 RARP는 물리적 주소와 IP 주소를 관련시킵니다.

2. 세 가지 일반적인 네트워크 아키텍처는 케이블 연결 이더넷, IEEE 802.11(WiFi), IEEE 802.16(WiMax)입니다.

3. MAC 계층은 네트워크 어댑터에 인터페이스를 제공합니다. 논리 링크 제어 계층은 프레임을 위한 오류 검사를 제공하고 서브넷의 서브 네트워크 노드 간의 링크를 관리합니다.

워크숍으로

3.10 핵심 용어

다음 핵심 용어를 복습하세요.

• 접근 방법: 전송 매체에 대한 접근을 조절하는 절차

• CRC(주기적 덧붙임 검사): 데이터 프레임의 내용을 확인하는데 사용되는 체크섬 계산

• CSMA/CD(반송파 감지 다중 접속/충돌 감지): 이더넷에서 사용하는 네트워크 접근 방법

• 데이터 링크 계층: OSI 모델의 두 번째 계층

• 이더넷: CSMA/CD 네트워크 접근 방법을 사용하는 가장 인기 있는 LAN 아키텍처

• FCS(프레임 검사 순서): 데이터를 확인하는데 사용되는 CRC 기반 체크섬 값을 포함하는 이더넷 프레임 내의 필드

• LLC(논리 링크 제어) 하위 계층: 서브넷의 장치간 오류 확인 및 관리를 담당하는 OSI 데이터 링크 계층의 하위 계층

• MAC(미디어 접근 제어) 하위 계층: 네트워크 어댑터와의 인터페이스를 담당하는 OSI 데이터 링크 계층의 하위 계층

• 네트워크 아키텍처: 접근 방법, 데이터 프레임 및 네트워크 케이블링에 대한 사양을 포함하는 실제 네트워크의 완전한 사양

• 물리 주소(또는 MAC 주소): 물리적 네트워크의 네트워크 어댑터를 식별하는 주소. 이더넷의 경우 실제 주소는 일반적으로 제조업체에서 할당하지만 일부 최신 네트워크 어댑터는 실제 주소 구성을 허용합니다.

• 물리 계층: 데이터 프레임을 전송 매체에 적합한 비트 스트림으로 변환하는 첫 번째 OSI 계층

• 프리앰블: 데이터 프레임 전송의 시작을 표시하는 일련의 비트

---

이전 장에서 배웠듯이 이더넷 LAN 같은 단일 네트워크의 컴퓨터는 네트워크 접근 계층에서 사용 가능한 물리 주소를 사용해 서로 통신합니다. 그렇다면 이메일 메시지가 캐롤라이나에서 캘리포니아로 어떻게 이동해서 정확히 목적지에 도달할까요? 이 장에서 배우겠지만, 인터넷 계층의 프로토콜은 로컬 네트워크를 넘어서는 전송 기능을 제공합니다. 이 장에서는 중요한 인터넷 계층 프로토콜인 IP, ARP 및 ICMP에 관해 설명하겠습니다.

이 장의 핵심은 인터넷에서 사용되는 32비트 2진 IPv4 주소입니다. 세계는 현재 향상된 기능과 훨씬 더 큰 주소 공간을 제공하는 IPv6라는 새로운 128비트 주소 시스템으로 전환하고 있습니다. IPv6에 대한 자세한 내용은 13장을 참고하세요.

이 장을 끝내고 나면,

• IP, ARP 그리고 ICMP의 목적을 설명할 수 있습니다.

• 네트워크 ID와 호스트 ID가 무엇인지 설명할 수 있습니다.

• 옥텟이 무엇인지 설명할 수 있습니다.

• 점으로 구분된 10진 주소를 2진수로 변환할 수 있습니다.

• 32비트 2진 IP 주소를 점으로 구분된 10진수 표기법으로 변환할 수 있습니다.

• IP 헤더를 설명할 수 있습니다.

• IP 주소의 목적을 설명할 수 있습니다.

4.1 IP 주소: 작은 맥락

이 장에서는 대규모 라우팅 네트워크의 개별 컴퓨터 및 장치에 IP 주소를 할당하기 위한 공식적이고 체계적인 규칙에 관해 설명합니다. 이러한 규칙은 TCP/IP 프로토콜 시스템의 기본적인 부분이며 TCP/IP를 이해하려면 IP 주소 지정을 이해해야 하지만, IP 주소 할당에 대한 세부 사항은 일반 사용자가 알아야 할 필요는 없습니다.

오늘날의 네트워크에서 대부분의 컴퓨터는 DHCP 서버를 통해 자동으로 IP 주소를 받습니다(DHCP를 통한 동적 주소 할당에 관한 자세한 내용은 12장을 참고하세요). 이보다 더 중요한 사실은 네트워크 주소 변환 기술(12장에서 설명합니다) 덕분에 여러분의 로컬 네트워크가 더는 인터넷 IP 주소 계층에 귀속되지 않아도 된다는 점입니다. 하지만 실제로 네트워크의 컴퓨터는 여전히 이러한 규칙을 사용해 패킷을 전달하고 라우팅 결정을 내립니다.

IP 주소 지정에 관한 지식도 문제를 해결하는 데 중요합니다. 잘못 구성된 서브넷이나 IP 주소 때문에 종종 문제가 발생하기도 합니다. 때에 따라 컴퓨터가 로컬 DHCP 서버에서 올바른 주소를 받지 못할 수도 있습니다. 따라서 IP 주소 지정에 대한 기본적인 이해는 자신의 IP 주소 공간에서 발생하는 문제를 진단하고 해결하는 데 도움이 됩니다.

4.2 주소 지정 및 전달

3장에서 배웠듯이 컴퓨터는 네트워크 어댑터 카드 같은 네트워크 인터페이스 장치를 통해 네트워크와 통신합니다. 네트워크 인터페이스 장치는 고유한 물리 주소를 가지며, 해당 물리 주소로 전송된 데이터를 수신하도록 설계되었습니다. 이더넷 카드 같은 장치는 상위 프로토콜 계층의 세부 사항을 알지 못합니다. 자신의 IP 주소 또한 알지 못할뿐더러 수신 중인 프레임이 SSH에 전송되는지 혹은 FTP에 전송되는지도 알지 못합니다. 단지 프레임을 수신하면서 자체 물리 주소로 지정된 프레임을 기다리다가 지정된 프레임이 들어오면 해당 프레임을 프로토콜 스택으로 전달합니다.

물리 주소 지정 체계는 개별 LAN 영역에서 잘 작동합니다. 지속적인 연결 매체에 몇 대의 컴퓨터만으로 구성된 네트워크는 물리 주소만으로도 작동할 수 있습니다. 네트워크 접근 계층과 관련된 저수준 프로토콜을 사용해 네트워크 어댑터에서 네트워크 어댑터로 데이터를 직접 전달할 수 있습니다.

불행하게도 라우팅된 네트워크에서는 물리 주소로 데이터를 전달할 수 없습니다. 물리 주소로 전달하는 데 필요한 검색 절차는 라우터 인터페이스에서 작동하지 않기 때문입니다. 네트워크 카드의 영구적 물리 주소를 사용하면 주소 공간에 논리적 구조를 적용할 수 없으므로 물리 주소로 전송하는 것이 번거로울 수 있습니다.

따라서 TCP/IP는 물리 주소를 가리고 그대신에 논리적, 계층적 주소 지정 체계를 중심으로 네트워크를 구성합니다. 이 논리 주소 지정 체계는 인터넷 계층의 IP 프로토콜에 의해 유지됩니다. 이러한 논리 주소를 IP 주소라고 합니다. ARP라는 또 다른 인터넷 계층 프로토콜은 IP 주소를 물리 주소로 매핑하는 테이블을 구성합니다. 이 ARP 테이블은 IP 주소와 네트워크 어댑터 카드와 관련된 물리 주소 간의 링크입니다.

라우팅 된 네트워크(그림 4-1 참조)에서 TCP/IP 소프트웨어는 네트워크에서 데이터를 전송하기 위해 다음 전략을 사용합니다.

1. 대상 주소가 소스 컴퓨터와 동일한 네트워크 영역에 있다면 소스 컴퓨터는 대상에게 패킷을 직접 보냅니다. ARP를 사용해 IP 주소의 물리 주소를 확인하며, 데이터는 대상 네트워크 어댑터로 전달됩니다.

2. 대상 주소가 소스 컴퓨터와 다른 영역에 있으면 다음 프로세스를 시작합니다.

• 데이터그램은 게이트웨이로 전송됩니다. 게이트웨이(gateway)는 데이터그램을 다른 네트워크 영역으로 전달하는 로컬 네트워크 영역의 장치입니다. 1장에서 설명한 대로 게이트웨이는 기본적으로 라우터입니다. 게이트웨이 주소는 일반적으로 TCP/IP 구성으로 정의됩니다. 인터넷 서비스 제공 업체를 통해 정적 IP 주소로 인터넷 계정을 설정하면 제공 업체가 게이트웨이에 사용할 주소를 알려줍니다. ARP를 사용해 게이트웨이 주소를 물리 주소로 확인하고 데이터는 게이트웨이의 네트워크 어댑터로 전송됩니다.

• 데이터그램은 게이트웨이를 통해 상위 수준의 네트워크 영역(그림 4-1 참조)으로 라우팅되며, 이곳에서 프로세스가 반복됩니다. 대상 주소가 새 영역에 있으면 데이터가 해당 대상으로 전달되고, 없으면 다른 게이트웨이로 전송됩니다.

• 데이터그램은 게이트웨이 체인을 통해 대상 영역으로 전달되며, 여기서 대상 IP 주소는 ARP를 사용해 물리 주소에 매핑되고 데이터는 대상 네트워크 어댑터로 보냅니다.

▲ 그림 4-1 게이트웨이는 다른 네트워크로 주소 지정된 데이터그램을 받는다

복잡하게 라우팅된 네트워크에서 데이터를 전달하려면 인터넷 계층 프로토콜이 다음을 수행할 수 있어야 합니다.

• 로컬 네트워크의 컴퓨터를 식별합니다.

• 게이트웨이를 통해 메시지를 보내야 하는 때를 결정하는 수단을 제공합니다.

• 데이터그램이 라우터를 통해 올바른 영역으로 효율적으로 전달되도록 대상 네트워크 영역을 식별하는 하드웨어로부터 독립적인 수단을 제공합니다.

• 대상 컴퓨터의 논리적 IP 주소를 물리 주소로 변환해 데이터를 대상 컴퓨터의 네트워크 어댑터로 전달할 수 있는 수단을 제공합니다.

세계는 현재 IPv6라는 새로운 버전의 IP로 전환하고 있지만, 가장 일반적인 IP 버전은 IPv4입니다. 이 장에서는 IPv4 주소 지정 시스템을 알아보고, TCP/IP가 인터넷 계층의 IP 및 ARP를 사용해 어떻게 복잡한 네트워크에서 데이터그램을 전달하는지 알아보겠습니다. 또한, 오류를 발견하고 문제를 해결하는 인터넷 계층의 ICMP 프로토콜도 알아보겠습니다. 대체 IPv6 주소 시스템에 관한 설명은 13장을 참고하세요.

Note ≡ 인터넷 계층과 OSI


인터넷 계층은 OSI 네트워크 계층에 해당하며 3번째 계층이라고도 합니다.

4.3 인터넷 프로토콜

인터넷 프로토콜(IP)은 하드웨어로부터 독립적인 계층적 주소 지정 시스템을 제공하며 복잡하게 라우팅된 네트워크에서 데이터를 전달하는 데 필요한 서비스를 제공합니다. TCP/IP 네트워크의 각 네트워크 어댑터에는 고유한 IP 주소가 있습니다.

Note ≡ 호스트


TCP/IP를 설명할 때 종종 IP 주소를 가진 컴퓨터를 언급할 때가 있습니다. 대부분의 컴퓨터는 네트워크 어댑터 한 개를 가지기 있어서 컴퓨터가 IP 주소를 하나 가지고 있다고 말합니다. 하지만 네트워크 어댑터를 여러 개 가진 컴퓨터도 흔합니다. 예를 들어 라우터 또는 프록시 서버 역할을 하는 컴퓨터는 네트워크 어댑터가 두 개 이상 있어야 하므로 IP 주소 또한 두 개 이상 있어야 합니다. 호스트(host)라는 용어는 종종 IP 주소와 관련된 네트워크 장치에 사용됩니다.

일부 운영 체제에서는 단일 네트워크 어댑터에 IP 주소를 두 개 이상 할당할 수도 있습니다.

네트워크 IP 주소는 주소를 보고 호스트의 위치(호스트가 있는 네트워크 또는 서브넷)를 알 수 있도록 구성되어 있습니다(그림 4-2). 즉, 주소의 일부는 (일반적인 위치를 설명하는) 우편 번호와 같으며, 주소의 일부는 (일반적인 영역 내의 정확한 위치를 나타내는) 도로 주소와 비슷합니다.

일반적으로 어떤 사람이 그림 4-2를 보고 ‘192.132.134로 시작하는 모든 주소는 빌딩 C에 있어야 합니다’라고 말할 수 있습니다. 그러나 컴퓨터는 이보다 자세한 가이드가 필요합니다. 따라서 IP 주소는 다음 두 부분으로 나뉘어 있습니다.

• 네트워크 ID

• 호스트 ID

▲ 그림 4-2 주소로 네트워크를 식별할 수 있다

네트워크는 IP 주소의 어느 부분이 네트워크 ID이고 어느 부분이 호스트 ID인지 판별하는 수단을 제공해야 합니다. 불행히도 현실 세계에서는 네트워크의 다양성과 복잡성 때문에 이 문제를 간단히 해결할 수 없습니다. 대규모 네트워크는 대량의 호스트를 위해 대량의 호스트 비트를 준비해야 하는데 그렇지 못하기 때문입니다. 소규모 네트워크는 각 호스트에 고유한 ID를 부여하는 데 비트가 많이 필요하지 않습니다. 하지만 방대한 수의 소규모 네트워크는 네트워크 ID에 더 많은 IP 주소를 구성하기 위해 비트 수가 많이 필요하다는 것을 의미합니다.

▲ 그림 4-2 주소로 네트워크를 식별할 수 있다

네트워크는 IP 주소의 어느 부분이 네트워크 ID이고 어느 부분이 호스트 ID인지 판별하는 수단을 제공해야 합니다. 불행히도 현실 세계에서는 네트워크의 다양성과 복잡성 때문에 이 문제를 간단히 해결할 수 없습니다. 대규모 네트워크는 대량의 호스트를 위해 대량의 호스트 비트를 준비해야 하는데 그렇지 못하기 때문입니다. 소규모 네트워크는 각 호스트에 고유한 ID를 부여하는 데 비트가 많이 필요하지 않습니다. 하지만 방대한 수의 소규모 네트워크는 네트워크 ID에 더 많은 IP 주소를 구성하기 위해 비트 수가 많이 필요하다는 것을 의미합니다.

이 장 뒷부분에서 배우겠지만, 이 문제에 대한 근본적인 해결책은 IP 주소 공간을 일련의 주소 클래스(class)로 나누는 것입니다. 클래스 A 네트워크는 네트워크 ID로 주소의 처음 8비트를 사용합니다. 클래스 B는 처음 16비트를 사용합니다. 클래스 C 네트워크는 처음 24비트를 사용합니다. 이러한 시스템은 네트워크를 구성하기 위한 로컬 수준에서 더 나은 제어 기능을 제공하는 ‘서브넷팅’(subnetting)이라는 기능을 통해 확장되었습니다.

최신 기술인 클래스리스 인터도메인 라우팅(CIDR, Classless Inter-Domain Routing)은 본질적으로 주소 클래스 시스템이 필요하지 않습니다. 현재 인터넷에서 일반적으로 사용되는 CIDR은 네트워크 ID에 속하는 비트 수를 지정하기 위해 단순 유연하고 명확한 표기법을 사용합니다.

TCP/IP 네트워크를 살펴보려면 클래스 기반 주소 지정 시스템과 CIDR 주소 지정 시스템에 익숙해져야 합니다. 5장에서 이러한 기술을 자세히 알아보겠습니다. 지금은 이러한 표기 체계를 사용하는 목적이 모두 IP 주소를 네트워크 ID과 호스트 ID로 나누는 것으로 동일하다는 점을 명심하세요.

Note ≡ 서브넷


이 장은 5장과 함께 공부하세요. 서브넷 ID 및 CIDR을 배울 때까지 IP 주소 지정 기술을 완벽하게 마스터하기는 힘듭니다. 13장의 IPv6은 인터넷 주소 지정을 완전히 이해하는 데 중요한 역할을 합니다. 개방형 인터넷이 IPv6을 완전히 지원하도록 전환하고 있지만, 네트워크 주소 변환(및 IPv6의 향상된 기능을 사용하는 완성된 애플리케이션이 없음)이 널리 사용될 때까지는 IPv4를 계속 사용할 것입니다. 13장에서 살펴보겠지만, IPv4 주소는 IPv6 주소 공간에 매핑됩니다(따라서 차세대 IP와 일부 호환됩니다).

4.3.1 IP 헤더 필드

모든 IP 데이터그램은 IP 헤더로 시작합니다. 소스 컴퓨터의 TCP/IP 소프트웨어가 IP 헤더를 구성합니다. 대상의 TCP/IP 소프트웨어는 IP 헤더에 포함된 정보를 사용해 데이터그램을 처리합니다. IP 헤더에는 소스 및 대상 컴퓨터의 IP 주소, 데이터그램 길이, IP 버전 번호 및 라우터에 대한 특수 지침을 비롯한 많은 정보가 들어 있습니다.

Note ≡ 헤더에 대한 추가 정보


IP 헤더에 대한 추가 정보는 RFC 791을 참고하세요.

IP 헤더의 최소 크기는 20바이트입니다. 그림 4-3은 IP 헤더의 내용을 보여줍니다.

▲ 그림 4-3 IP 헤더 필드

그림 4-3의 헤더 필드는 다음과 같습니다.

• 버전: 이 4비트 필드는 사용 중인 IP 버전을 나타내며, 현재 IP 버전은 4입니다. 4의 2진 패턴은 0100입니다.

• IHL(Internet Header Length): 이 4비트 필드는 IP 헤더의 길이를 32비트 문자열로 제공합니다. 최소 헤더 길이는 5개의 32비트 문자열입니다. 5의 2진 패턴은 0101입니다.

• 서비스 유형: 소스 IP는 특별한 라우팅 정보를 지정할 수 있습니다. 일부 라우터는 최근 서비스 품질(QoS, Quality of Service) 기술의 출현으로 많은 관심을 받고 있지만, 일부 라우터는 서비스 유형 필드를 무시합니다. 이 8비트 필드의 주요 목적은 라우터를 통과하기 위해 대기 중인 데이터그램의 우선순위를 지정하는 방법을 제공하는 것입니다. 오늘날 IP 구현은 대부분 이 필드에 모두 0을 넣습니다.

• 총 길이: 16비트 필드는 IP 데이터그램의 길이를 옥텟 단위로 식별합니다 총 길이에는 IP 헤더와 데이터 페이로드(payload)가 포함됩니다.

• 식별자: 16비트 필드는 소스 IP에서 보낸 메시지에 지정된 증분 시퀀스 번호입니다. 메시지가 IP 계층으로 전송되고 하나의 데이터그램에 맞지 않을 정도로 크면 IP는 메시지를 여러 데이터그램으로 분할해 모든 데이터그램에 동일한 식별 번호를 부여합니다. 이 번호는 수신 측에서 소스 메시지를 다시 조합하는 데 사용됩니다.

• 플래그: 플래그 필드는 조각화(fragmentation) 가능성을 나타냅니다. 첫 번째 비트는 사용되지 않으며 항상 0의 값을 가집니다. 다음 비트는 DF(Don’t Fragment) 플래그(flag)라고 합니다. DF 플래그는 조각화가 허용되는지(값 = 0) 안 되는지(값 = 1)를 나타냅니다. 다음 비트는 MF(More Fragments) 플래그로, 수신자에게 더 많은 조각화가 진행되고 있음을 알려줍니다. MF가 0으로 설정되면 조각을 더 보내거나 데이터그램을 조각화하지 않아도 됩니다.

• 프래그먼트 오프셋: 이 13비트 필드는 각 연속 조각(fragment)에 할당된 숫자 값입니다. 대상의 IP는 프래그먼트 오프셋(fragment offset)을 사용해 프래그먼트를 올바른 순서로 재조립합니다. 이 값은 오프셋을 8바이트 단위의 수로 나타냅니다.

• TTL(Time to Live): 이 비트 필드는 데이터그램이 삭제되기 전에 존속할 수 있는 시간(초) 또는 라우터 홉을 나타냅니다. 모든 라우터는 이 필드를 검사하고 라우터 내부에서 데이터그램이 지연되는 시간(초)만큼 TTL 필드 값을 감소시킵니다. 이 필드가 0에 도달하면 데이터그램이 삭제됩니다.

홉(hop)은 데이터그램이 대상으로 가는 도중에 교차해야 하는 라우터 수를 나타냅니다. 대상에 도착하기 전에 데이터그램이 5개의 라우터를 통과하면 해당 대상은 5홉 또는 5개의 라우터 홉이라고 합니다.

• 프로토콜: 8비트 프로토콜 필드는 데이터 페이로드를 수신할 프로토콜을 나타냅니다. 예를 들어 프로토콜 식별자 6(2진 00000110)을 가진 데이터그램이 상위 스택에 있는 TCP 모듈로 전달됩니다. 다음은 일반적인 몇몇 프로토콜의 값입니다.

▼ 표 4-1 일반적인 프로토콜의 예

|프로토콜 이름||프로토콜 식별자|
|ICMP|1|
|TCP|6|
|UDP|17|

• 헤더 체크섬: 이 필드는 16비트의 계산된 값을 가지며 헤더의 유효성만 검증합니다. 이 필드는 모든 라우터에서 TTL 필드가 감소하면서 재계산됩니다.

• 소스 IP 주소: 이 32비트 필드에는 데이터그램 소스의 주소가 있습니다.

• 대상 IP 주소: 이 32비트 필드에는 데이터그램의 대상 주소가 있으며 대상 IP에서 올바르게 전달되었는지 확인하는 데 사용됩니다.

• IP 옵션: 이 필드는 주로 테스트, 디버깅 및 보안에 사용되는 여러 선택적 헤더 설정을 지원합니다. 엄격한 소스 경로(데이터그램이 따라야 하는 특정 라우터 경로), 인터넷 타임스탬프(각 라우터의 타임스탬프 레코드) 및 보안 제한 옵션이 있습니다.

• 패딩: IP 옵션 필드의 길이는 다를 수 있습니다. 패딩 필드는 추가 헤더를 제공해 총 헤더 길이가 정확히 32비트의 배수가 되도록 합니다. IHL 필드는 헤더 길이를 32비트 문자열로 측정하므로 헤더는 32비트 문자열 다음에 끝나야 합니다.

• IP 데이터 페이로드: 이 필드에는 일반적으로 TCP 또는 UDP(전송 계층), ICMP 또는 IGMP로 전달할 데이터가 포함됩니다. 데이터의 양은 가변적이지만 수천 바이트를 포함할 수 있습니다.
4.3.2 IP 주소

  IP 주소는 32비트 2진 주소입니다. 32비트 주소는 옥텟(octet)이라고 하는 4개의 8비트 영역으로 세분화됩니다. 사람은 32비트 2진 주소 또는 8비트 2진 옥텟을 이해하기 힘들기 때문에 IP 주소는 거의 항상 10진수 형식으로 표현됩니다. 점으로 구분된 10진수 형식에서 각 옥뎃은 동등한 10진수로 표현됩니다. 그런 다음 네 개의 10진수 값(4 x 8 = 32비트)이 점으로 분리됩니다. 각 옥텟은 0에서 255까지의 정수를 나타낼 수 있으므로 점으로 구분된 10진 주소의 각 영역은 0에서 255까지의 10진수를 표현할 수 있습니다. 이 책이나 다른 TCP/IP 문서에서 점으로 구분된 10진수 IP 주소의 예를 보았을 것입니다. 예를 들어 점으로 구분된 10진수 IP 주소는 다음과 같습니다.


   

  IP 주소의 일부는 네트워크 ID에 사용되고 다른 일부는 호스트 ID에 사용됩니다. 이 장 앞부분에서 배웠듯이 네트워크 및 호스트 ID를 지정하는 방식은 원래 주소 클래스 시스템을 이용하는 것입니다. 최근에는 CIDR 클래스리스 주소 지정으로 클래스 시스템의 중요성이 줄었지만, 여전히 TCP/IP의 주소 지정을 이해하기 위한 시작점으로 중요한 역할을 하고 있습니다. IP 주소 지정 기술에 대한 자세한 내용은 5장을 참고하세요.

  주소 클래스 시스템은 IP 주소 공간을 여러 개의 주소 클래스로 나눕니다. 대부분의 IP 주소는 다음과 같은 클래스로 나뉩니다.

  
    • 클래스 A 주소: IP 주소의 처음 8비트가 네트워크 ID에 사용되고, 마지막 24비트는 호스트 ID에 사용됩니다.

    • 클래스 B 주소: IP 주소의 처음 16비트는 네트워크 ID에 사용되고, 마지막 16비트는 호스트 ID에 사용됩니다.

    • 클래스 C 주소: IP 주소의 처음 24비트는 네트워크 ID에 사용되고, 마지막 8비트는 호스트 ID에 사용됩니다.
  

  비트가 많을수록 조합할 수 있는 비트 수가 늘어납니다. 클래스 A 주소는 각 네트워크에 대해 네트워크 ID를 되도록 적게, 호스트 ID를 많이 제공함을 짐작할 수 있습니다. 클래스 A 네트워크는 약 224(16,777,216)개의 호스트를 지원합니다. 반면에 클래스 C 네트워크는 적은 수의 호스트(254개, 28=256에서 사용할 수 없는 00000000 및 11111111 주소 두 개를 뺀)에만 호스트 ID를 제공하지만, 클래스 C 형식으로도 여러 네트워크 ID 조합이 가능합니다.

  컴퓨터 혹은 라우터가 어떻게 IP 주소를 클래스 A, 클래스 B, 또는 클래스 C 주소로 판단하는지 궁금할 것입니다. TCP/IP 설계자는 주소를 보면 바로 어떤 유형의 클래스 주소인지 알 수 있도록 주소 규칙을 만들었습니다. 2진 주소에서 처음 몇 비트로 주소가 클래스 A인지 클래스 B 또는 클래스 C 주소인지 판단합니다(표 4-1 참고). 주소 해석 규칙은 다음과 같습니다.

  
    • 32비트 2진 주소가 0비트로 시작하면 해당 주소는 클래스 A 주소입니다.

    • 32비트 2진 주소가 10비트로 시작하면 해당 주소는 클래스 B 주소입니다.

    • 32비트 2진 주소가 110비트로 시작하면 해당 주소는 클래스 C 주소입니다.
  

  이 규칙은 (고맙게도) 점으로 구분된 10진수 표기법으로 쉽게 변환할 수 있습니다. 이러한 규칙은 점으로 구분된 10진 주소에서 첫 번째 항의 값 범위를 제한하는 효과가 있기 때문입니다. 예를 들어 클래스 A 주소는 첫 번째 옥텟의 가장 왼쪽에 0비트를 가져야 하므로 이에 해당하는 점으로 구분된 10진 주소의 첫 번째 항은 127보다 클 수 없습니다. 이 장 뒷부분에서 2진수를 10진수로 변환하는 방법에 대해 좀 더 알아보겠습니다. 표 4-2는 클래스 A, B 및 C 네트워크의 주소 범위를 보여줍니다. 일부 주소 범위는 제외된 주소로 표시됩니다. 특정 IP 주소 범위는 특수 용도로 예약되어 있기 때문에 네트워크에 할당되지 않습니다. 이 장 뒷부분에서 특수 IP 주소를 자세히 알아보겠습니다.

  ▼ 표 4-2 클래스 A, B, C 네트워크의 주소 범위

  
    
      
        
          주소 클래스
        

        
          2진 주소
        

        
          점으로 구분된 10진 주소의 첫 번째 범위는
        

        
          제외 주소
        
      

      
        
          A
        

        
          0
        

        
          0 ~ 127
        

        
          10.0.0.0 ~ 0.255.255.255

          127.0.0.0 ~ 127.255.255
        
      

      
        
          B
        

        
          10
        

        
          128 ~ 191
        

        
          172.16.0.0 ~ 172.31.255.255
        
      

      
        
          C
        

        
          110
        

        
          192 ~ 223
        

        
          192.168.0.0 ~ 192.168.255.255
        
      
    
  

  
    Note ≡ 클래스 D와 E
    

    특수한 목적의 클래스 D와 클래스 E의 주소도 있습니다. 클래스 D 주소는 멀티캐스트에 사용됩니다. 멀티캐스트(multicast)는 브로드캐스트(broadcast)와 반대로 네트워크의 하위 집합으로 전송되는 단일 메시지로, 로컬 네트워크의 모든 노드에서 처리됩니다. 클래스 D 네트워크 주소의 첫 4개의 비트는 항상 2진수 1110으로 시작하는데, 이는 10진수 224~239에 해당합니다. 클래스 E 네트워크는 아직 실험적인 네트워크로 실제 환경에서는 일반적으로 사용되지 않습니다. 클래스 E 네트워크의 첫 5개의 비트는 항상 2진수 11110으로 시작합니다. 이는 10진수 패턴 240~247에 해당합니다.
  

  네트워크 소유자는 네트워크를 서브넷(subnet)이라는 더 작은 하위 네트워크로 나눌 수 있습니다. 서브넷팅은 기본적으로 호스트 ID의 일부 비트를 빌려 네트워크에 추가 네트워크를 만듭니다. 호스트 ID 주소 공간이 큰 클래스 A 및 B 네트워크는 서브넷을 광범위하게 사용한다는 것을 알 수 있습니다. 서브넷팅은 클래스 C 네트워크에서도 사용됩니다. 서브넷에 대한 자세한 내용은 5장에서 알아보겠습니다.

  
    Note ≡ 유일무이
    

    이론적으로 인터넷상의 모든 컴퓨터에는 고유한 IP 주소가 있어야 합니다. 실제로 프록시 서버 소프트웨어 및 NAT(네크워크 주소 변환) 장치를 사용하면 등록되지 않은 고유 주소와 비 고유 주소를 인터넷에서 사용할 수 있습니다. 12장에서 NAT 장치에 대해 자세히 알아보겠습니다.
  

   

   

  4.3.3 32비트 2진 주소를 점으로 구분된 10진수 형식으로 변환하기

  2진수 숫자는 자릿수 값이 10의 거듭제곱이 아니라 2의 거듭제곱이라는 점을 제외하고는 10진수 숫자와 유사합니다. 그림 4-4에서 볼 수 있듯이 10진수 정수는 오른쪽에 있는 1의 자리로 시작해 왼쪽으로 갈수록 10의 거듭제곱 수가 순차적으로 커지며, 10진수 정수의 값은 각 자리 값의 합계입니다. 예를 들어 (표시된 대로) 10진수 126,325의 값은 다음과 같이 결정됩니다.

  (1 x 100,000) + (2 x 10,000) + (6 x 1000) + (3 x 100) + (2 x 10) + (5 x 1) = 126,325

  2진수도 오른쪽에 있는 숫자부터 시작합니다. 왼쪽으로 갈수록 2의 거듭제곱 수가 순차적으로 커집니다(그림 4-5 참조).

  

  ▲ 그림 4-4 10진수 체계

  

  ▲ 그림 4-5 2진수 체계

  
    Note ≡ 0과 1
    

    0과 1의 비트 패턴은 디지털 회로에서 사용되는 온/오프 상태와 같아서 컴퓨터에는 2진법이 사용됩니다.
  

  특정 2진수에 해당하는 10진수를 계산하려면 1을 포함한 모든 비트의 자리 값을 추가하세요. IP 주소는 각각 10진수 형식으로 변환해야 하는 옥텟 3개로 구성됩니다. 다음은 32비트 2진 IP 주소를 점으로 구분된 10진수 형식으로 변환하는 방법을 보여주는 예입니다.

  2진 주소 01011001000111011100110000011000을 변환하려면 다음 단계를 수행하세요.

  1. 먼저 주소를 8비트 옥텟으로 나누세요.

  옥텟 1: 01011001

  옥텟 2: 00011101

  옥텟 3: 11001100

  옥텟 4: 00011000

   

  2. 각 옥텟을 10진수로 변환합니다. 이 프로세스는 표 4-2에 설명되어 있습니다.

  
    ▼ 표 4-3 2진 주소를 점으로 구분된 10진수 형식으로 변환

    
      
        
          
            옥텟
          

          
            2진수
          

          
            계산 과정
          

          
            10진수
          
        

        
          
            1
          

          
            01011001
          

          
            1 + 8 + 16 + 64
          

          
            89
          
        

        
          
            2
          

          
            00011101
          

          
            1 + 4 + 8 + 16
          

          
            29
          
        

        
          
            3
          

          
            11001100
          

          
            4 + 8 + 64 + 128
          

          
            204
          
        

        
          
            4
          

          
            00011000
          

          
            8 + 16
          

          
            24
          
        
      
    
  

  3. 왼쪽에서 오른쪽으로 10진수 값을 쓰세요. 이때 값을 마침표로 구분하세요.

  
    주소는 89.29.204.24입니다.
  

  2진 주소를 점으로 구분된 10진수 형식으로 변환하는 연습이 더 필요하다면 이 장 ‘4.14절 워크숍’을 확인하세요.

   

   

  4.3.4 10진수를 2진수 옥텟으로 변환하기

  10진수를 2진수로 변환하려면 그림 4-5에 표시된 프로세스를 반대로 수행해야 합니다. 점으로 분리된 10진 주소를 32비트 2진 주소로 변환해야 한다면 주소에서 마침표로 구분된 각 숫자를 2진 옥텟으로 변환하고 각 옥텟을 연결하세요. 다음은 10진수 207을 2진 옥텟으로 변환하는 방법을 보여주는 예입니다.

  
    Note ≡ 더 많은 공간
    

    이 절차에서는 IP 주소 옥텟을 나타내는 10진수로 시작했다고 가정합니다. 변환하는 숫자가 255보다 크다면 그림 4-5에 표시된 2진 위치 값 다이어그램을 확장하고 그에 따라 절차를 조정해야 합니다.
  

  10진수 207을 2진수 옥텟으로 변환하려면 다음 단계를 수행합니다.

  1. 변환하려는 10진수(현재 207)를 숫자 128과 비교합니다. 10진수가 128보다 크거나 같으면 128을 빼고 1을 적습니다. 10진수가 128보다 작으면 0을 빼고 0을 적습니다.

  207 > 128

  207 – 128 = 79

  128 자리에 1을 적으세요.

  현재 값: 1

   

  2. 1단계(현재 79)의 결과를 가져와 숫자 64와 비교합니다. 10진수가 64보다 크거나 같으면 64를 빼고 1을 적습니다. 10진수가 64보다 작으면 0을 빼고 0을 적습니다.

  79 > 64

  79 – 64 = 15

  64 자리에 1을 적으세요.

  현재 값: 11

   

  3. 2단계(현재 15)의 결과를 가져와서 숫자 32와 비교합니다. 10진수가 32보다 크거나 같으면 32를 빼고 1을 적습니다. 10진수가 32보다 작으면 0을 빼고 0을 적습니다.

  15 < 32

  15 – 0 = 15

  32자리에 0을 적으세요.

  현재 값: 110

   

  4. 3단계의 결과를 숫자 16과 비교합니다. 숫자가 16보다 크거나 같으면 16을 빼고 1을 적습니다. 숫자가 16보다 작으면 0을 빼고 0을 적습니다.

  15 < 16

  15 – 0 = 15

  16자리에 0을 적으세요.

  현재 값: 1100

   

  5. 4단계의 결과를 숫자 8과 비교합니다. 숫자가 8보다 크거나 같으면 8을 빼고 1을 적습니다. 숫자가 8보다 작으면 0을 빼고 0을 적습니다.

  15 > 8

  15 – 8 = 7

  8자리에 1을 적으세요.

  현재 값: 11001

   

  6. 5단계의 결과를 숫자 4와 비교합니다. 숫자가 4보다 크거나 같으면 4를 빼고 1을 적습니다. 숫자가 4보다 작으면 0을 빼고 0을 적습니다.

  7 > 4

  7 - 4 = 3

  4자리에 1을 적으세요.

  현재 값: 110011

  7. 6단계의 결과를 숫자 2와 비교합니다. 숫자가 2보다 크거나 같으면 2를 빼고 1을 적습니다. 숫자가 2보다 작으면 0을 빼고 0을 적습니다.

  3 > 2

  3 – 2 = 1

  2자리에 1을 적으세요.

  현재 값: 1100111

   

  8. 7단계의 결과가 1이면 1을 0이면 0을 적습니다.

  1 = 1

  1자리에 1을 적으세요

  결괏값: 11001111

  이제 10진수 207을 2진수 11001111로 변환했습니다.

  
    Note ≡ 2로 나누기
    

    10진수를 2진수로 변환하는 또 다른 방법은 0에 도달할 때까지 10진수를 2로 계속 나누고 각 몫과 나머지를 기록하는 것입니다. 나머지는 2진수와 동등하게 취급하며, 첫 번째 나머지는 첫 번째 자리의 수에, 다음 나머지는 그다음으로 높은 자리의 수로 나타냅니다. 예를 들어 다음과 같이 10진수 207을 2진수로 변환해 보겠습니다.

    207/2 = 103 + 1 -> 1

    103/2 = 51 + 1 -> 1

    51/2 = 25 + 1 -> 1

    25/2 = 12 + 1 -> 1

    12/2 = 6 + 0 -> 0

    6/2 = 3 + 0 -> 0

    3/2 = 1 + 1 -> 1

    1/2 = 0 + 1 -> 1

    마지막 나머지부터 연속으로 나열해 결과를 만듭니다(11001111).
  

   

   

  4.3.5 특별한 IP 주소

  일부 IP 주소는 특별한 의미를 가지며 특정 호스트에 할당되지 않습니다. 모든 값이 0인 호스트 ID는 네트워크 자체를 나타냅니다. 예를 들어 IP 주소 129.152.0.0은 네트워크 ID가 129.152인 클래스 B 네트워크를 나타냅니다.

  모든 값이 1인 호스트 ID는 브로드캐스트를 나타냅니다. 브로드캐스트는 네트워크의 모든 호스트로 전송되는 메시지입니다. IP 주소 129.152.255.255는 네트워크 ID가 129.152인 클래스 B 네트워크의 브로드캐스트 주소입니다. 점으로 구분된 10진수 255는 값이 모두 1인 2진수 옥텟 11111111에 해당합니다.

  주소 255.255.255.255는 네트워크에서 브로드캐스트에 사용될 수도 있습니다.

  10진수 127로 시작하는 주소는 루프백(loopback) 주소입니다. 루프백 주소로 지정된 메시지는 로컬 TCP/IP 소프트웨어에 의해 자신에게 전송됩니다. 루프백 주소는 TCP/IP 소프트웨어가 작동하는지 확인하는 데 사용됩니다. 14장의 핑(ping) 유틸리티에 대한 설명을 참고하세요. 루프백 주소 127.0.0.1이 일반적으로 사용됩니다.

  RFC 1597(나중에 RFC 1918로 업데이트되었음)은 개인 네트워크에 대한 일부 IP 주소 범위를 예약합니다. 이러한 개인용 주소 범위는 인터넷에 연결되어 있지 않으므로 주소가 고유할 필요는 없으며, 근래에는 종종 NAT 장치 기반의 보안 네트워크에 사용됩니다.

  
    • 10.0.0.0 ~ 10.255.255.255

    • 172.16.0.0 ~ 172.31.255.255

    • 192.168.0.0 ~ 192.168.255.255
  

  개인 주소 범위는 다른 국가와 동기화될 필요가 없기에 모든 네트워크에서 전체 주소 범위를 사용할 수 있습니다. 이러한 개인 주소를 사용하는 네트워크 관리자는 서브넷에 더 많은 공간과 할당 가능한 주소를 가집니다. 인터넷 서비스 제공 업체는 때때로 전체 네트워크를 개인 주소 범위에 배치하므로 컴퓨터를 설정하지 않은 경우에도 컴퓨터 주소가 개인 범위에 있음을 알 수 있습니다.

  주소 범위 169.254.0.0 ~ 169.255.255.255는 자동 구성을 위해 예약되어 있습니다. Zeroconf 시스템 및 기타 자동 구성 프로토콜에 대한 자세한 내용은 12장에서 알아보겠습니

  4.4 주소 확인 프로토콜
  

  앞에서 배웠듯이 로컬 네트워크의 컴퓨터는 주소 확인 프로토콜(ARP)이라는 인터넷 계층 프로토콜을 사용해 IP 주소를 물리 주소에 매핑합니다. 데이터를 보내려면 호스트는 대상 네트워크 어댑터의 물리 주소를 알아야 합니다. 이러한 이유로 ARP는 중요한 프로토콜입니다. 그런데 TCP/IP는 ARP 및 물리 주소 변환의 모든 세부 사항이 사용자가 거의 볼 수 없게 구현되어 있습니다. 사용자에게 네트워크 어댑터는 IP 주소로 식별되지만, 실제로는 대상에 도달할 수 있도록 IP 주소가 물리 주소에 매핑되어야 합니다(3장 참고).

  네트워크의 각 호스트는 ARP 테이블 또는 ARP 캐시(cache)라는 메모리상의 테이블을 유지하고 관리합니다. ARP 캐시는 네트워크에 있는 다른 호스트의 IP 주소를 물리 주소와 연결합니다(그림 4-6). 호스트가 네트워크의 다른 호스트로 데이터를 보낼 때는 호스트는 ARP 캐시를 검사해 수신자의 물리 주소를 결정합니다. ARP 캐시는 동적으로 조립됩니다. 데이터를 수신할 주소가 현재 ARP 캐시에 없으면 호스트는 ARP 요청 프레임이라는 브로드캐스트를 보냅니다.

  

  ▲ 그림 4-6 ARP는 IP 주소를 물리 주소에 매핑한다

  ARP 요청 프레임에는 확인되지 않은 IP 주소, 요청을 보낸 호스트의 IP 주소, 물리 주소도 포함되어 있습니다. 네트워크의 다른 호스트는 ARP 요청을 받은 후에, 확인되지 않은 IP 주소를 가지고 있는 호스트는 요청을 보낸 호스트에 물리 주소를 보내 응답합니다. 그런 다음 새로 확인된 IP 주소와 물리 주소의 매핑 결과를 요청 호스트의 ARP 캐시에 추가합니다.

  일반적으로 ARP 캐시의 항목은 정해진 시간이 지나면 소멸됩니다. 즉 ARP 항목의 수명이 다 되면 해당 항목을 테이블에서 제거합니다. 이후에 호스트가 소멸된 항목의 IP 주소로 데이터를 보내야 한다면 이때 다시 확인 과정을 진행합니다.
  4.5 역 ARP
  

  RARP는 Reverse ARP의 약자입니다. RARP는 ARP와 반대입니다. ARP는 IP 주소는 알지만 물리 주소는 알 수 없을 때 사용됩니다. 반대로 RARP는 물리 주소는 알지만 IP 주소는 알 수 없을 때 사용됩니다. RARP는 종종 디스크가 없는 워크스테이션을 부팅하기 위해 BOOTP 프로토콜과 함께 사용됩니다.

  
    Note ≡ BOOTP(부팅 PROM)
    

    많은 네트워크 어댑터에는 부팅 PROM이라는 집적 회로를 삽입하는 빈 소켓이 있습니다. 컴퓨터가 켜지면 부팅 PROM 펌웨어가 시작됩니다. 로컬 디스크 드라이브 대신 네트워크 서버에서 운영 체제를 읽어 컴퓨터에 운영 체제를 로드합니다. BOOTP 장치로 내려받은 운영 체제는 특정 IP 주소에 맞게 미리 구성되어 있습니다.

    4.6 인터넷 제어 메시지 프로토콜
  

  원격 컴퓨터로 전송되는 데이터는 종종 하나 이상의 라우터를 통해 전송됩니다. 이러한 라우터는 메시지를 최종 목적지로 보낼 때 많은 문제를 일으킵니다. 이때 라우터는 인터넷 제어 메시지 프로토콜(ICMP, Internet Control Message Protocol) 메시지를 사용해 이러한 문제를 소스 IP에 알립니다. ICMP는 다른 진단 및 문제 해결에도 사용됩니다.

  가장 일반적인 ICMP 메시지를 다음과 같습니다. 다른 몇 가지 조건에도 ICMP 메시지가 생성되지만, 발생 빈도는 상당히 낮습니다.

  
    • 에코 요청 및 에코 응답: 보통 ICMP는 테스트에 사용됩니다. ping 명령어로 다른 호스트와 연결됐는지 확인하는 데 ICMP를 사용합니다. ping 명령은 데이터그램을 IP 주소로 보내고 대상 컴퓨터에 응답 데이터그램으로 전송된 데이터를 반환하도록 요청합니다. ping에 사용되는 명령은 실제로는 ICMP의 Echo Request 및 Echo Reply입니다.

    • 소스 퀀치: 전송 속도가 빠른 컴퓨터가 많은 양의 데이터를 원격 컴퓨터로 보내면 데이터의 양(트래픽)을 라우터가 감당하기 힘들 수 있습니다. 라우터는 ICMP를 사용해 Source Quench(소스 퀀치) 메시지를 소스 IP로 전송해 데이터를 전송하는 속도를 늦추도록 요청합니다. 필요하다면 추가 소스 퀀치 메시지를 소스 IP로 보낼 수도 있습니다.

    • 도달 불가 목적지: 라우터가 전달할 수 없는 데이터그램을 수신하면 ICMP는 Destination Unreachable(목적지에 도달할 수 없다는) 메시지를 소스 IP로 돌려보냅니다. 라우터가 메시지를 전달할 수 없는 한 가지 이유는 장비 고장 또는 유지 보수로 네트워크가 다운되었기 때문입니다.

    • 시간 초과: TTL이 0에 도달해 데이터그램이 삭제되면 ICMP는 이 메시지를 소스 IP로 전송합니다. 대상이 현재 TTL 값으로 도달할 수 있는 라우터 홉 수가 너무 많거나 데이터그램이 같은 라우터를 계속해서 무한적으로 반복하며 생기는 테이블 문제를 나타냅니다.

    라우팅 루프는 데이터그램이 끝없이 순환하고 목적지에 도달하지 못할 때 발생합니다. 로스앤젤레스, 샌프란시스코, 덴버에 하나씩 총 3개의 라우터가 있다고 가정해 보겠습니다. 로스엔젤레스 라우터는 데이터그램을 샌프란시스코로 보내면, 샌프란시스코 라우터는 다시 덴버로 보내고, 덴버 라우터는 다시 로스엔젤레스로 보냅니다. TTL이 0에 도달할 때까지 데이터그램이 갇히고 3개의 라우터를 통해 계속해서 순환합니다. 라우팅 루프는 자주 발생하지는 않습니다만, 네트워크 관리자가 정적 라우팅 항목을 라우팅 테이블에 배치하면 라우팅 루프가 종종 발생합니다.

    • 조각화 필요: ICMP가 Don't Fragment(조각화하지 마세요) 비트가 설정된 데이터그램을 수신하고 라우터가 데이터그램을 조각화해 다음 라우터 또는 대상으로 전달해야 할 때 이 메시지를 전송합니다.
  

  
    Note ≡ 다른 인터넷 계층 프로토콜
    

    인터넷 계층에는 다른 프로토콜도 많이 있습니다. 예를 들어 IPv4에서는 선택 사항이지만 IPv6의 필수 부분인 IPsec 프로토콜은 안전하게 암호화된 통신을 제공하기 위해 인터넷 계층에서 작동합니다(19장 참고). 다른 인터넷 계층 프로토콜은 멀티캐스팅 같은 작업을 지원합니다.

    4.7 요약
  

  이 장에서는 인터넷 계층 프로토콜인 IP, ARP, RARP 및 ICMP를 배웠습니다. IP는 네트워크를 통해 데이터를 전달하기 위한 하드웨어로부터 독립적인 주소 지정 시스템을 제공합니다. 2진 및 점으로 분리된 10진수 IP 주소 형식 및 IP 주소 클래스 A, B, C, D 및 E에 대해 알아봤으며, IP 주소를 물리 주소로 확인하는 프로토콜인 ARP도 알아봤습니다. RARP는 ARP와 반대로 디스크가 없는 컴퓨터가 서버에 고유한 IP 주소를 요청할 수 있게 합니다. ICMP는 진단 및 테스트에 사용되는 프로토콜입니다.

  4.8 Q&A
  

  Q. 32비트 2진 주소를 단순화하기 위해 어떤 공통된 주소 표기법이 사용됩니까?

  A. 점으로 구분된 10진수 표기법

   

  Q. ARP는 IP 주소가 주어지면 어떤 유형의 정보를 반환합니까?

  A. 해당 물리 주소(또는 MAC 주소)

   

  Q. 라우터가 트래픽 양을 따라 잡을 수 없으면 어떤 유형의 ICMP 메시지가 소스 IP로 전송됩니까?

  A. 소스 퀀치 메시지

   

  Q. 첫 3개의 비트가 2진수 110으로 시작하는 IP 주소는 어떤 클래스에 속합니까?

  A. 클래스 C 네트워크

  4.9 워크숍
  

  워크숍은 일련의 퀴즈와 연습 문제로 구성되어 있습니다. 퀴즈는 배운 내용을 잘 이해했는지 테스트하기 위한 것입니다. 연습 문제는 이 장에서 배운 개념을 적용해 보는 것이니 시간을 충분히 가지고 문제를 풀어 보세요. 해답은 부록 A를 참고하세요.

   

   

  4.9.1 퀴즈

  1. IP 헤더에서 TTL 필드의 목적은 무엇입니까?

  2. 클래스 A 주소의 네트워크 및 호스트 ID 필드는 얼마나 됩니까?

  3. 옥텟은 무엇입니까?

  4. IP 주소는 무엇입니까?

  5. ARP와 RARP의 차이점은 무엇입니까?

   

   

  4.9.2 연습 문제

  1. 다음 2진수 옥텟을 10진수로 변환하세요.

  00101011

  01010010

  11010110

  10110111

  01001010

  01011101

  10001101

  11011110

   

  2. 다음 10진수를 2진수 옥텟으로 변환하세요

  13

  184

  238

  37

  98

  161

  243

  189

   

  3. 다음 32비트 IP 주소를 점으로 분리된 10진수 표기법으로 변환하세요

  11001111 00001110 00100001

  01011100 00001010 00001101

  01011001 01001101 10111101

  10010011 01010101 01100001

   4장 풀이 

  퀴즈

  1. TTL 필드는 IP 데이터그램이 삭제되기 전에 남은 홉 수를 계산하는 데 사용합니다. 이 필드의 목적은 데이터그램이 네트워크에서 무기한 순환되는 것을 방지하는 데 있습니다.

  2. 네트워크 ID는 8바이트이고, 호스트 ID는 24바이트입니다.

  3. 옥텟은 8비트 데이터 조각입니다. 일반적으로 바이트(byte)라고 합니다.

  4. IP 주소는 컴퓨터 혹은 네트워킹 장치의 개별 네트워크 인터페이스의 주소를 지정합니다.

  5. ARP는 IP 주소를 물리 주소로 매핑하기 위해 사용합니다. RARP는 물리 주소를 IP 주소로 매핑하기 위해 사용합니다.

  

  연습 문제

  1. 답 = 43

  답 = 82

  답 = 214

  답 = 183

  답 = 74

  답 = 93

  답 = 141

  답 = 222

  2. 답 = 00001101

  답 = 10111000

  답 = 11101110

  답 = 00100101

  답 = 01100010

  답 = 10100001

  답 = 11110011

  답 = 10111101

  3. 답 = 207.14.33.92

  답 = 10.13.89.77

  답 = 189.147.85.97

  워크숍으로

  
4.10 핵심 용어
  

  다음 핵심 용어를 복습하세요.

  
    • 주소 클래스: IP 주소 분류 시스템으로, 네트워크 클래스는 주소가 네트워크 ID과 호스트 ID로 세분되는 방법을 결정합니다.

    • ARP(주소 확인 프로토콜): IP 주소와 관련된 물리 주소를 얻는 데 사용되는 주요 인터넷 계층 프로토콜입니다. ARP는 최근에 사용된 물리 주소와 IP 주소의 캐시를 유지하고 관리합니다.

    • BOOTP: 원격으로 컴퓨터 또는 다른 네트워크 장치를 부팅하는 데 사용되는 프로토콜입니다.

    • 점으로 구분된 10진수: 원래 주소를 점로 구분한4개의 옥텟으로 나타내는(209.121.131.14) 2진 IP 주소의 10진 표현입니다.

    • 호스트 ID: 네트워크의 노드를 나타내는 IP 주소의 일부입니다. 네트워크의 각 노드에는 고유한 호스트 ID가 포함된 IP 주소가 있어야 합니다.

    • ICMP(인터넷 제어 메시지 프로토콜): 라우팅 문제가 발생했을 때 라우터가 소스 IP에 알리는 메시지를 보내는 데 사용하는 주요 인터넷 계층 프로토콜입니다. 또한, ICMP는 ping 명령에서 네트워크의 다른 호스트 상태를 확인하는 데 사용됩니다.

    • IP(인터넷 프로토콜): 데이터그램의 주소 지정, 전달 및 라우팅에 사용되는 주요 인터넷 계층 프로토콜입니다.

    • 멀티캐스트: 데이터그램을 호스트 그룹에 동시에 전송할 수 있는 기술입니다.

    • 네트워크 ID: 네트워크를 식별하는 IP 주소의 일부입니다.

    • 옥텟: 8자리 2진수입니다.

    • RARP(역 ARP): 물리 주소가 제공되면 IP 주소를 반환하는 TCP/IP 프로토콜입니다. 이 프로토콜은 일반적으로 네트워크 어댑터에 원격 부팅 PROM이 설치된 디스크 없는 워크 스테이션에서 사용됩니다.

    • 서브넷: TCP/IP 주소 공간의 논리적 부분입니다

    서브넷팅은 IP 주소를 사용해 물리적 네트워크를 더 작은 논리적 개체로 분리하기 위한 수단으로 진화했습니다. 이후 개발된 CIDR과 IPv6(13장 참고)는 서브넷에 대한 전통적인 접근 방식의 필요성을 줄였지만, 이러한 기술은 기본적인 서브넷 원리를 빌려왔기에 서브넷에 대한 설명 없이는 TCP/IP에 관해 이야기할 수 없습니다. 이 장에서는 IPv4 네트워크에서 서브넷팅의 이점과 필요성 및 서브넷 마스크를 생성하기 위한 단계와 절차를 설명하겠습니다.

  이 장을 끝내고 나면,

  
    • 서브넷이 어떻게 사용되는지 설명할 수 있습니다.

    • 서브넷팅의 이점을 설명할 수 있습니다.

    • 비즈니스 요구를 만족하는 서브넷 마스크를 개발할 수 있습니다.

    • 서브넷팅과 CIDR 표기법을 설명할 수 있습니다.
  

   

   

  
    5.1 서브넷
  

  IP 주소는 호스트와 해당 호스트가 있는 네트워크를 식별할 수 있어야 합니다. 4장에서 배웠듯이, IP 주소 클래스 시스템은 주소에서 네트워크 부분과 호스트 부분을 구분할 수 있는 단서를 제공해줍니다. 하지만 주소 클래스 시스템만으로는 융통성이 없습니다. 현실 세계에서 네트워크는 여러 크기로 나타나고 더 작은 단위로 분리됩니다. 또한, 클래스 수준의 네트워크가 부족해지고 있습니다. 인터넷 제공자(ISP)와 네트워크 관리자는 데이터그램이 작은 주소 공간을 제공하는 라우터에 도달할 수 있게 클래스 수준의 네트워크를 세분화할 수 있어야 합니다.

  서브넷팅(subnetting)은 네트워크를 서브넷(subnet)이라고 하는 더 작은 단위로 분리합니다. 서브넷은 주소 클래스 시스템을 기반으로 진화했었고, 서브넷팅은 클래스 A, B, C 네트워크의 맥락에서 가장 잘 설명할 수 있습니다. 하지만 정작 하드웨어 공급 업체 및 인터넷 커뮤니티는 주소 클래스에 의존하지 않는 클래스리스 인터도메인 라우팅(CIDR, Classless Inter-Domain Routing)이라고 하는 새로운 주소 해석 시스템에 정착했습니다. 이 장에서는 주소 클래스 시스템의 서브넷으로 시작해서 CIDR 표기법까지 알아보겠습니다.